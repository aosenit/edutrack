{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet UnpaidSubscriptionsComponent = class UnpaidSubscriptionsComponent {\n  constructor(subscriptionService, notifyService, route) {\n    this.subscriptionService = subscriptionService;\n    this.notifyService = notifyService;\n    this.route = route;\n  }\n  ngOnInit() {\n    this.schoolId = this.route.snapshot.params.id;\n    this.getAllSubscriptionCreated();\n  }\n  getAllSubscriptionCreated() {\n    this.subscriptionService.getUnpaidUnvoice(this.schoolId).subscribe(res => {\n      if (res.hasErrors === false) {\n        this.unpaidInvoice = res.payload;\n      } else {\n        this.notifyService.publishMessages(res.errors, 'danger', 1);\n      }\n    });\n  }\n  confirmToPay(e, i) {\n    this.selectMarkedInvoice = this.unpaidInvoice[i];\n    if (e === true) {\n      document.getElementById('popupBtn').click();\n      console.log(document.getElementById('selectionModal'));\n    }\n  }\n  previewInvoice(i) {\n    this.selectedInvoice = this.unpaidInvoice[i];\n  }\n  markPaid() {\n    const payload = {\n      // tslint:disable-next-line:radix\n      invoiceId: parseInt(this.selectMarkedInvoice.invoiceId),\n      expiryDate: this.selectMarkedInvoice.dueDate\n    };\n    this.subscriptionService.markInvoiceAsPaid(payload).subscribe(res => {\n      if (res.hasErrors === false) {\n        document.getElementById('close').click();\n        this.getAllSubscriptionCreated();\n        // console.log(res.payload);\n        this.notifyService.publishMessages(res.description, 'success', 1);\n      } else {\n        this.notifyService.publishMessages(res.errors, 'danger', 1);\n      }\n    });\n  }\n  back() {\n    window.history.back();\n  }\n};\nUnpaidSubscriptionsComponent = __decorate([Component({\n  selector: 'app-unpaid-subscriptions',\n  templateUrl: './unpaid-subscriptions.component.html',\n  styleUrls: ['./unpaid-subscriptions.component.css']\n})], UnpaidSubscriptionsComponent);\nexport { UnpaidSubscriptionsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}