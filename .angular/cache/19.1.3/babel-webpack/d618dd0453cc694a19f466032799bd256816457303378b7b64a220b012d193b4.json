{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/data/subject/subject.service\";\nimport * as i2 from \"src/services/data/class/class.service\";\nimport * as i3 from \"src/services/data/result/result.service\";\nimport * as i4 from \"src/services/classes/notifications/notifications.service\";\nimport * as i5 from \"src/services/data/school-section/school-section.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction BroadSheetComponent_option_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const level_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", level_r1 == null ? null : level_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", level_r1 == null ? null : level_r1.name, \" \");\n  }\n}\nfunction BroadSheetComponent_option_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const class_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", class_r2 == null ? null : class_r2.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", class_r2.name, \"\", class_r2 == null ? null : class_r2.classGroup, \" \");\n  }\n}\nfunction BroadSheetComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31);\n    i0.ɵɵelement(2, \"img\", 32);\n    i0.ɵɵelementStart(3, \"p\", 33);\n    i0.ɵɵtext(4, \" Select level and class to display \");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" information \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction BroadSheetComponent_div_48_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const subject_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, subject_r3 == null ? null : subject_r3.subjectName), \" \");\n  }\n}\nfunction BroadSheetComponent_div_48_tr_10_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const assessment_r7 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", assessment_r7 == null ? null : assessment_r7.score, \" \");\n  }\n}\nfunction BroadSheetComponent_div_48_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 40)(2, \"div\", 41);\n    i0.ɵɵelement(3, \"img\", 42);\n    i0.ɵɵelementStart(4, \"div\", 43)(5, \"p\", 44);\n    i0.ɵɵlistener(\"click\", function BroadSheetComponent_div_48_tr_10_Template_p_click_5_listener() {\n      const i_r5 = i0.ɵɵrestoreView(_r4).index;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.saveStudentDetails(i_r5));\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"titlecase\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(8, BroadSheetComponent_div_48_tr_10_td_8_Template, 2, 1, \"td\", 38);\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const student_r8 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 3, student_r8 == null ? null : student_r8.studentName), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.studentData[i_r5].assessmentAndScores);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r8 == null ? null : student_r8.averageScore);\n  }\n}\nfunction BroadSheetComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\", 34)(2, \"thead\")(3, \"tr\");\n    i0.ɵɵelement(4, \"th\", 35);\n    i0.ɵɵtemplate(5, BroadSheetComponent_div_48_th_5_Template, 4, 3, \"th\", 36);\n    i0.ɵɵelementStart(6, \"th\", 37)(7, \"span\");\n    i0.ɵɵtext(8, \"Average Score\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, BroadSheetComponent_div_48_tr_10_Template, 11, 5, \"tr\", 38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"div\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.subject);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.studentData);\n  }\n}\nexport let BroadSheetComponent = /*#__PURE__*/(() => {\n  class BroadSheetComponent {\n    constructor(subjectService, classService, resultService, notifyService, schoolSectionService) {\n      this.subjectService = subjectService;\n      this.classService = classService;\n      this.resultService = resultService;\n      this.notifyService = notifyService;\n      this.schoolSectionService = schoolSectionService;\n      this.noData = true;\n      this.displayData = false;\n    }\n    ngOnInit() {\n      // this.getAllClasses();\n      this.getSections();\n    }\n    getSections() {\n      this.schoolSectionService.getSection().subscribe(res => {\n        // tslint:disable-next-line:no-string-literal\n        this.levels = res['payload'];\n        // this.levels = this.levels.reverse();\n        // ('levels', this.levels);\n      });\n    }\n    getClassBySectionId(id) {\n      // (id);\n      this.classService.getClassBySection(id).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.classList = data.payload;\n        }\n      });\n    }\n    getSubjectsAndStudents(id) {\n      // ('class id ', id);\n      this.Classid = id;\n      sessionStorage.setItem('class-id', this.Classid);\n      this.classService.getAllSubjectsInAClassByClassID(id).subscribe(data => {\n        if (data.hasErrors === false) {\n          // (data);\n          this.noData = false;\n          this.displayData = true;\n          this.getBroadSheet();\n        }\n      });\n    }\n    getBroadSheet() {\n      // this.resultService.get(this.Classid).subscribe((data: any) => {\n      this.resultService.getStudentBroadSheetApprovedByTEacher(this.Classid).subscribe(data => {\n        if (data.hasErrors === false) {\n          // (data);\n          this.studentData = data.payload;\n          this.subject = this.studentData[0].assessmentAndScores;\n          // // ();\n        } else {\n          this.notifyService.publishMessages(data.errors, 'danger', 1);\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    saveStudentDetails(u) {\n      // (this.studentData[u]);\n      sessionStorage.setItem('student-details', JSON.stringify(this.studentData[u]));\n    }\n    downloadBroadsheetInExcel() {\n      sessionStorage.getItem(this.Classid);\n      this.resultService.exportBroadsheetExcel(this.Classid).subscribe(res => {\n        if (res.hasErrors === false) {\n          const link = document.createElement('a');\n          link.download = `${res.payload.fileName} as at ${new Date().toLocaleString()}.xlsx`;\n          link.href = 'data:image/png;base64,' + res.payload.base64String;\n          link.click();\n        }\n      });\n    }\n    downloadBroadsheetInPdf() {\n      sessionStorage.getItem(this.Classid);\n      this.resultService.exportBroadsheetPdf(this.Classid).subscribe(res => {\n        if (res.hasErrors === false) {\n          const link = document.createElement('a');\n          link.download = `${res.payload.fileName} as at ${new Date().toLocaleString()}.pdf`;\n          link.href = 'data:image/png;base64,' + res.payload.base64String;\n          link.click();\n        }\n      });\n    }\n    static #_ = (() => this.ɵfac = function BroadSheetComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BroadSheetComponent)(i0.ɵɵdirectiveInject(i1.SubjectService), i0.ɵɵdirectiveInject(i2.ClassService), i0.ɵɵdirectiveInject(i3.ResultService), i0.ɵɵdirectiveInject(i4.NotificationsService), i0.ɵɵdirectiveInject(i5.SchoolSectionService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BroadSheetComponent,\n      selectors: [[\"app-broad-sheet\"]],\n      decls: 49,\n      vars: 4,\n      consts: [[1, \"col-md-12\", \"mt-5\", \"mr-3\"], [1, \"banner\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\", \"pb-3\"], [1, \"pt-5\", \"pl-3\", \"content\"], [1, \"banner__text-primary\", \"fw-6\"], [1, \"\"], [\"type\", \"button\", 1, \"btn-upload-top\", \"btn-orange-two\"], [\"src\", \"assets/images/svg/upload.svg\", \"alt\", \"new client\", 1, \"mr-2\"], [1, \"d-flex\", \"justify-content-end\", \"align-items-center\", \"mb-4\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"mr-5\", \"cursor-pointer\"], [\"width\", \"15\", \"height\", \"15\", \"viewBox\", \"0 0 15 15\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"fill-rule\", \"evenodd\", \"clip-rule\", \"evenodd\", \"d\", \"M10.0429 9.43396H10.7204L15 13.7221L13.7221 15L9.43396 10.7204V10.0429L9.2024 9.80274C8.2247 10.6432 6.9554 11.1492 5.57461 11.1492C2.49571 11.1492 0 8.65352 0 5.57461C0 2.49571 2.49571 0 5.57461 0C8.65352 0 11.1492 2.49571 11.1492 5.57461C11.1492 6.9554 10.6432 8.2247 9.80274 9.2024L10.0429 9.43396ZM1.71556 5.57444C1.71556 7.70995 3.4394 9.43379 5.57491 9.43379C7.71042 9.43379 9.43426 7.70995 9.43426 5.57444C9.43426 3.43894 7.71042 1.7151 5.57491 1.7151C3.4394 1.7151 1.71556 3.43894 1.71556 5.57444Z\", \"fill\", \"#155b75\"], [1, \"mr-5\", \"cursor-pointer\", 3, \"click\"], [\"width\", \"20\", \"height\", \"13\", \"viewBox\", \"0 0 20 13\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M16.125 4.9075C15.8451 3.5244 15.0813 2.27895 13.9642 1.38389C12.8471 0.488827 11.4459 -0.000318697 10 1.55786e-07C7.59167 1.55786e-07 5.5 1.3325 4.45833 3.2825C3.23353 3.41155 2.10084 3.97736 1.27791 4.8712C0.454976 5.76504 -0.000143085 6.92386 3.3744e-08 8.125C3.3744e-08 10.8144 2.24167 13 5 13H15.8333C18.1333 13 20 11.18 20 8.9375C20 6.7925 18.2917 5.05375 16.125 4.9075ZM14.1667 7.3125L10 11.375L5.83333 7.3125H8.33333V4.0625H11.6667V7.3125H14.1667Z\", \"fill\", \"#155b75\"], [\"width\", \"17\", \"height\", \"17\", \"viewBox\", \"0 0 17 17\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M13.4577 5.66667H3.54102C2.36518 5.66667 1.41602 6.61583 1.41602 7.79167V12.0417H4.24935V14.875H12.7493V12.0417H15.5827V7.79167C15.5827 6.61583 14.6335 5.66667 13.4577 5.66667ZM11.3327 13.4583H5.66602V9.91667H11.3327V13.4583ZM13.4577 8.5C13.0681 8.5 12.7493 8.18125 12.7493 7.79167C12.7493 7.40208 13.0681 7.08333 13.4577 7.08333C13.8473 7.08333 14.166 7.40208 14.166 7.79167C14.166 8.18125 13.8473 8.5 13.4577 8.5ZM12.7493 2.125H4.24935V4.95833H12.7493V2.125Z\", \"fill\", \"#155b75\"], [1, \"bg-white\", \"mt-3\", \"mb-3\", \"br-10\", \"py-5\", \"px-4\"], [1, \"d-flex\", \"justify-content-start\", \"align-items-center\", \"mb-4\"], [1, \"row\"], [1, \"col\"], [\"for\", \"section\"], [\"name\", \"\", \"id\", \"section\", 1, \"form-control\", 3, \"change\"], [\"value\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"class\"], [\"name\", \"\", \"id\", \"\", 1, \"form-control\", 3, \"change\"], [\"class\", \"file-viewer d-flex justify-content-center align-items-center p-3 bg-white w-100\", \"style\", \"height: 85vh; width: 100%\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"value\"], [1, \"file-viewer\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"p-3\", \"bg-white\", \"w-100\", 2, \"height\", \"85vh\", \"width\", \"100%\"], [1, \"d-flex\", \"flex-column\", \"text-center\"], [\"src\", \"assets/images/svg/sad-face.svg\", \"alt\", \"table sort icon\", 1, \"mb-3\"], [1, \"fw-6\", \"fs-24\", 2, \"color\", \"#bab9c1\"], [1, \"table\"], [1, \"w-25\"], [\"class\", \"vertical-header\", 4, \"ngFor\", \"ngForOf\"], [1, \"vertical-header\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"justify-content-center\", \"my-5\"], [1, \"d-flex\", \"justify-content-between\", \"dropright\", \"align-items-center\", \"border-bottom\", \"border-top\"], [1, \"d-flex\", \"text-left\"], [\"src\", \"assets/images/svg/teacher-grade.svg\", \"alt\", \"new client\", 1, \"mr-3\"], [1, \"student-info\"], [1, \"mb-0\", \"cursor-pointer\", 3, \"click\"]],\n      template: function BroadSheetComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2)(3, \"h6\", 3);\n          i0.ɵɵtext(4, \"Grade Book\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6, \"Broad sheet\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"button\", 5);\n          i0.ɵɵelement(8, \"img\", 6);\n          i0.ɵɵtext(9, \" Import \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(13, \"svg\", 10);\n          i0.ɵɵelement(14, \"path\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(15, \" Search \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(16, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function BroadSheetComponent_Template_div_click_16_listener() {\n            return ctx.downloadBroadsheetInExcel();\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(17, \"svg\", 13);\n          i0.ɵɵelement(18, \"path\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(19, \" Export In Excel \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(20, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function BroadSheetComponent_Template_div_click_20_listener() {\n            return ctx.downloadBroadsheetInPdf();\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(21, \"svg\", 13);\n          i0.ɵɵelement(22, \"path\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(23, \" Export In PDF \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(24, \"div\", 9);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(25, \"svg\", 15);\n          i0.ɵɵelement(26, \"path\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(27, \" Print \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(28, \"div\", 17)(29, \"div\", 18)(30, \"div\")(31, \"form\")(32, \"div\", 19)(33, \"div\", 20)(34, \"label\", 21);\n          i0.ɵɵtext(35, \"Section\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"select\", 22);\n          i0.ɵɵlistener(\"change\", function BroadSheetComponent_Template_select_change_36_listener($event) {\n            return ctx.getClassBySectionId($event.target.value);\n          });\n          i0.ɵɵelementStart(37, \"option\", 23);\n          i0.ɵɵtext(38, \"Select Level\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(39, BroadSheetComponent_option_39_Template, 2, 2, \"option\", 24);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(40, \"div\", 20)(41, \"label\", 25);\n          i0.ɵɵtext(42, \"Class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"select\", 26);\n          i0.ɵɵlistener(\"change\", function BroadSheetComponent_Template_select_change_43_listener($event) {\n            return ctx.getSubjectsAndStudents($event.target.value);\n          });\n          i0.ɵɵelementStart(44, \"option\", 23);\n          i0.ɵɵtext(45, \"Select Class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(46, BroadSheetComponent_option_46_Template, 2, 3, \"option\", 24);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵtemplate(47, BroadSheetComponent_div_47_Template, 7, 0, \"div\", 27)(48, BroadSheetComponent_div_48_Template, 12, 2, \"div\", 28);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(39);\n          i0.ɵɵproperty(\"ngForOf\", ctx.levels);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.classList);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.noData);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.displayData);\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.NgControlStatusGroup, i7.NgForm, i6.TitleCasePipe],\n      styles: [\".banner[_ngcontent-%COMP%]{width:100%;background:url(assignment-bg.svg) top left no-repeat,url(assignment-bg2.svg) top left no-repeat;background-repeat:no-repeat;background-size:cover;background-position:center;border-radius:10px;display:flex;justify-content:space-between;align-items:flex-end;padding:0 1.5rem;color:#fff;position:relative;background-blend-mode:multiply;mix-blend-mode:multiply;-webkit-backdrop-filter:opacity(.4);backdrop-filter:opacity(.4)}.btn-upload-top[_ngcontent-%COMP%]{border:none;outline:none;padding:11px 25px;color:#fff;border-radius:10px}.btn-orange-two[_ngcontent-%COMP%]{background:#04aed4;border-radius:5px;height:44px;font-family:Nunito;font-style:normal;font-weight:600;font-size:15px;line-height:20px;color:#fff}.banner__text-primary[_ngcontent-%COMP%]{font-size:36px}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#04aed4;font-weight:600;background:#ecfdff;border:1px solid #04aed4;border-radius:10px;padding:5px 12px}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background:#04aed4;border-radius:10px;color:#fff;padding:5px 12px}label[_ngcontent-%COMP%]{font-size:12px;color:#0a1128}select[_ngcontent-%COMP%]{background:#fafafa;border:1px solid #92b5dd;font-size:14px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#ebf0f5;border:1px solid #b4cde9;font-size:16px;color:#355691;font-weight:400;text-orientation:sideways-right;height:250px}.vertical-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{writing-mode:vertical-rl;transform:rotate(180deg);text-align:left;max-height:150px;height:200px}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;text-align:center}\"]\n    }))();\n  }\n  return BroadSheetComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}