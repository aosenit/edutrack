{"ast":null,"code":"import { JwtHelperService } from \"@auth0/angular-jwt\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/data/class/class.service\";\nimport * as i2 from \"src/services/data/assessment/assessment.service\";\nimport * as i3 from \"src/services/data/result/result.service\";\nimport * as i4 from \"src/services/classes/notifications/notifications.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction MailReportCardComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const term_r1 = ctx.$implicit;\n    const t_r2 = ctx.index;\n    i0.ɵɵproperty(\"value\", t_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", term_r1 == null ? null : term_r1.name, \"\");\n  }\n}\nfunction MailReportCardComponent_section_20_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 38)(1, \"td\", 39)(2, \"div\", 40)(3, \"input\", 41);\n    i0.ɵɵlistener(\"change\", function MailReportCardComponent_section_20_tr_13_Template_input_change_3_listener($event) {\n      const i_r6 = i0.ɵɵrestoreView(_r5).index;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.checked($event, i_r6));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"label\", 42);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\", 4)(6, \"div\", 6)(7, \"div\");\n    i0.ɵɵelement(8, \"img\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const student_r7 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"id\", \"customtable\", i_r6, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"customCheck\", i_r6, \"\");\n    i0.ɵɵproperty(\"value\", student_r7 == null ? null : student_r7.id);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"for\", \"customCheck\", i_r6, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", student_r7 == null ? null : student_r7.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r7 == null ? null : student_r7.regNumber);\n  }\n}\nfunction MailReportCardComponent_section_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 30)(1, \"table\", 31)(2, \"thead\")(3, \"tr\")(4, \"th\", 32)(5, \"div\", 33);\n    i0.ɵɵlistener(\"click\", function MailReportCardComponent_section_20_Template_div_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.selectAllBoxes($event));\n    });\n    i0.ɵɵelement(6, \"input\", 34)(7, \"label\", 35);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"th\", 36);\n    i0.ɵɵtext(9, \"Student Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 36);\n    i0.ɵɵtext(11, \"Student Number \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, MailReportCardComponent_section_20_tr_13_Template, 13, 9, \"tr\", 37);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.studentList);\n  }\n}\nfunction MailReportCardComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"div\", 45);\n    i0.ɵɵelement(2, \"img\", 46);\n    i0.ɵɵelementStart(3, \"p\", 47);\n    i0.ɵɵtext(4, \"Select term to display \");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" information\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let MailReportCardComponent = /*#__PURE__*/(() => {\n  class MailReportCardComponent {\n    constructor(classService, assessmentService, resultService, notifyService, route) {\n      this.classService = classService;\n      this.assessmentService = assessmentService;\n      this.resultService = resultService;\n      this.notifyService = notifyService;\n      this.route = route;\n      this.boxChecked = false;\n      this.StudentIds = [];\n      this.noData = true;\n      this.displayData = false;\n    }\n    ngOnInit() {\n      const helper = new JwtHelperService();\n      this.loggedInUser = helper.decodeToken(localStorage.getItem(\"access_token\"));\n      this.getClassAndSubjectForTeacher();\n      this.getCurrentSesion();\n    }\n    getClassAndSubjectForTeacher() {\n      this.classService.getClassAndSubjectForTeacherByTeacherId().subscribe(data => {\n        if (data.hasErrors === false) {\n          // // (data.payload);\n          this.classList = data.payload;\n        }\n      });\n    }\n    getSubjects(id) {\n      this.classId = id;\n    }\n    getCurrentSesion() {\n      this.assessmentService.getCurrentSession().subscribe(data => {\n        if (data.hasErrors === false) {\n          this.sessions = data.payload;\n          this.terms = data.payload.terms;\n        }\n      });\n    }\n    selectedTerm(event) {\n      this.selectedTermId = this.terms[event].sequenceNumber;\n      this.getApprovedStudentResults();\n    }\n    checked(event, i) {\n      if (event.target.checked === true) {\n        this.StudentIds.push(event.target.value);\n        document.getElementById(\"customtable\" + `${i}`).style.borderLeft = \"5px solid #04aed4\";\n        this.boxChecked = true;\n      } else {\n        const index = this.StudentIds.indexOf(event.target.value);\n        if (index > -1) {\n          this.StudentIds.splice(index, 1);\n        }\n        this.StudentIds.filter(item => item !== i);\n        document.getElementById(\"customtable\" + `${i}`).style.borderLeft = \"none\";\n      }\n      if (this.StudentIds.length === 0) {\n        this.boxChecked = false;\n      }\n    }\n    selectAllBoxes(e) {\n      const allBoxes = document.getElementsByName(\"boxes\");\n      if (e.target.checked === true) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let index = 0; index < allBoxes.length; index++) {\n          if (allBoxes[index].type === \"checkbox\") {\n            allBoxes[index].checked = true;\n            document.getElementById(\"customtable\" + `${index}`).style.borderLeft = \"5px solid #04aed4\";\n            this.boxChecked = true;\n            this.StudentIds.push(allBoxes[index].value);\n          }\n        }\n      } else {\n        // tslint:disable-next-line:prefer-for-of\n        for (let index = 0; index < allBoxes.length; index++) {\n          if (allBoxes[index].type === \"checkbox\") {\n            allBoxes[index].checked = false;\n            document.getElementById(\"customtable\" + `${index}`).style.borderLeft = \"0px\";\n            this.boxChecked = false;\n            this.StudentIds = [];\n          }\n        }\n      }\n    }\n    getApprovedStudentResults() {\n      // tslint:disable-next-line:max-line-length\n      this.resultService.getStudentApprovedResults(this.loggedInUser.TeacherClassId, this.sessions.id, this.selectedTermId).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.studentList = data.payload;\n          this.noData = false;\n          this.displayData = true;\n        } else {\n          this.notifyService.publishMessages(data.errors, \"danger\", 1);\n          this.noData = true;\n          this.displayData = false;\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, \"danger\", 1);\n      });\n    }\n    postMaiToParent() {\n      document.getElementById(\"exampleModalCenterEndClass\").click();\n      const studentId = this.StudentIds.map(ids => {\n        return parseInt(ids);\n      });\n      const result = {\n        studentIds: studentId,\n        resultPageURL: \"http://school-track-1.vercel.app/#/parent/parent-portal/view-report-card\",\n        classId: parseInt(this.loggedInUser.TeacherClassId),\n        curSessionId: this.sessions.id,\n        termSequenceNumber: this.selectedTermId\n      };\n      // (result);\n      this.resultService.mailReportSheetToParent(result).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.notifyService.publishMessages(\"Email sent out\", \"success\", 1);\n          document.getElementById(\"closeMailModal\").click();\n          location.reload();\n        } else {\n          this.notifyService.publishMessages(data.errors, \"danger\", 1);\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, \"danger\", 1);\n      });\n    }\n    static #_ = (() => this.ɵfac = function MailReportCardComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MailReportCardComponent)(i0.ɵɵdirectiveInject(i1.ClassService), i0.ɵɵdirectiveInject(i2.AssessmentService), i0.ɵɵdirectiveInject(i3.ResultService), i0.ɵɵdirectiveInject(i4.NotificationsService), i0.ɵɵdirectiveInject(i5.ActivatedRoute));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MailReportCardComponent,\n      selectors: [[\"app-mail-report-card\"]],\n      decls: 37,\n      vars: 5,\n      consts: [[1, \"container-fluid\", \"mt-4\"], [1, \"banner\", \"mb-4\", \"pb-3\"], [1, \"pt-5\", \"pl-3\", \"content\"], [1, \"banner__text-primary\", \"fw-6\"], [1, \"\"], [1, \"d-flex\", \"mb-3\", \"justify-content-between\", \"align-items-center\"], [1, \"d-flex\", \"align-items-center\"], [1, \"row\"], [1, \"col\", \"options\"], [\"name\", \"\", \"id\", \"\", 1, \"form-control\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"data-toggle\", \"modal\", \"data-target\", \"#exampleModalCenterEndClass\", 1, \"btn\", \"btn-orange-two\", \"px-5\", \"mb-4\", \"mt-3\", 3, \"disabled\"], [\"width\", \"22\", \"height\", \"18\", \"viewBox\", \"0 0 22 18\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M20.8156 6.29076C19.8619 7.05628 18.6594 7.9919 14.4299 11.139C13.6006 11.7769 12.0664 13.1804 10.6151 13.1804C9.12236 13.1804 7.62961 11.7769 6.75884 11.139C2.52938 7.9919 1.32689 7.05628 0.373187 6.29076C0.207326 6.16318 0 6.29076 0 6.50341V15.1792C0 16.3275 0.87077 17.2206 1.99033 17.2206H19.2399C20.318 17.2206 21.2302 16.3275 21.2302 15.1792V6.50341C21.2302 6.29076 20.9814 6.16318 20.8156 6.29076ZM10.6151 11.7769C11.5688 11.8195 12.9372 10.5436 13.6421 10.0333C19.1569 5.95054 19.5716 5.56778 20.8156 4.5471C21.0643 4.37698 21.2302 4.07928 21.2302 3.73906V2.93101C21.2302 1.82527 20.318 0.889648 19.2399 0.889648H1.99033C0.87077 0.889648 0 1.82527 0 2.93101V3.73906C0 4.07928 0.124396 4.37698 0.373187 4.5471C1.61714 5.56778 2.0318 5.95054 7.54668 10.0333C8.25159 10.5436 9.61994 11.8195 10.6151 11.7769Z\", \"fill\", \"white\"], [1, \"ml-2\"], [\"class\", \"list\", 4, \"ngIf\"], [\"class\", \"bg-white py-5 px-4 d-flex justify-content-center align-items-center\", 4, \"ngIf\"], [\"id\", \"exampleModalCenterEndClass\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"exampleModalCenterTitle\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\", \"modal2\"], [\"role\", \"document\", 1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-body\", \"justify-content-center\", \"p-3\"], [1, \"d-flex\", \"justify-content-center\", \"my-5\"], [\"src\", \"assets/images/svg/end-class-modal.svg\", \"alt\", \"\", 1, \"mr-3\"], [1, \"d-flex\", \"flex-column\", \"justify-content-center\"], [1, \"text-center\", \"fw-6\", \"email-text\"], [1, \"text-danger\"], [1, \"d-flex\", \"justify-content-center\", \"my-4\"], [\"type\", \"button\", 1, \"class-btn\", \"btn-blue\", 3, \"click\"], [3, \"value\"], [1, \"list\"], [1, \"table\", \"table-borderless\", \"client-table\"], [\"scope\", \"col \", 1, \"head\"], [1, \"custom-control\", \"custom-checkbox\", 3, \"click\"], [\"type\", \"checkbox\", \"id\", \"customCheckTh\", 1, \"custom-control-input\"], [\"for\", \"customCheckTh\", 1, \"custom-control-label\"], [\"scope\", \"col\"], [\"class\", \"pb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"pb-2\"], [\"scope\", \"row\", 1, \"school-logo\", \"rounded-left\", 3, \"id\"], [1, \"custom-control\", \"custom-checkbox\"], [\"type\", \"checkbox\", \"name\", \"boxes\", 1, \"custom-control-input\", \"boxes\", 3, \"change\", \"id\", \"value\"], [1, \"custom-control-label\", 3, \"for\"], [\"src\", \"assets/images/svg/companyalt.svg\", \"alt\", \"schools log\", \"id\", \"\", 1, \"mr-3\", \"image-rounded\"], [1, \"bg-white\", \"py-5\", \"px-4\", \"d-flex\", \"justify-content-center\", \"align-items-center\"], [1, \"d-flex\", \"flex-column\", \"text-center\"], [\"src\", \"assets/images/svg/sad-face.svg\", \"alt\", \"table sort icon\", 1, \"mb-3\"], [1, \"fw-6\", \"fs-24\", 2, \"color\", \"#BAB9C1\"]],\n      template: function MailReportCardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2)(3, \"h6\", 3);\n          i0.ɵɵtext(4, \"Mail Report Card\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6, \"\\u00A0\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"form\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"select\", 9);\n          i0.ɵɵlistener(\"change\", function MailReportCardComponent_Template_select_change_11_listener($event) {\n            return ctx.selectedTerm($event.target.value);\n          });\n          i0.ɵɵelementStart(12, \"option\", 10);\n          i0.ɵɵtext(13, \"Term\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, MailReportCardComponent_option_14_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(15, \"button\", 12);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(16, \"svg\", 13);\n          i0.ɵɵelement(17, \"path\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(18, \"span\", 15);\n          i0.ɵɵtext(19, \"Mail\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(20, MailReportCardComponent_section_20_Template, 14, 1, \"section\", 16)(21, MailReportCardComponent_div_21_Template, 7, 0, \"div\", 17);\n          i0.ɵɵelementStart(22, \"div\", 18)(23, \"div\", 19)(24, \"div\", 20)(25, \"div\", 21)(26, \"div\", 22);\n          i0.ɵɵelement(27, \"img\", 23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 24)(29, \"p\", 25);\n          i0.ɵɵtext(30, \"You have marked \");\n          i0.ɵɵelementStart(31, \"span\", 26);\n          i0.ɵɵtext(32);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(33, \" student's to schedule mail to\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 27)(35, \"button\", 28);\n          i0.ɵɵlistener(\"click\", function MailReportCardComponent_Template_button_click_35_listener() {\n            return ctx.postMaiToParent();\n          });\n          i0.ɵɵtext(36, \"Submit\");\n          i0.ɵɵelementEnd()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngForOf\", ctx.terms);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.boxChecked === false);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.displayData);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.noData);\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate1(\"(\", ctx.StudentIds == null ? null : ctx.StudentIds.length, \")\");\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.NgControlStatusGroup, i7.NgForm],\n      styles: [\".banner[_ngcontent-%COMP%]{width:100%;background:url(assignment-bg.svg) top left no-repeat,url(assignment-bg2.svg) top left no-repeat;background-repeat:no-repeat;background-size:cover;background-position:center;border-radius:10px;display:flex;justify-content:space-between;align-items:flex-end;padding:0 1.5rem;color:#fff;position:relative;background-blend-mode:multiply;mix-blend-mode:multiply;-webkit-backdrop-filter:opacity(.4);backdrop-filter:opacity(.4)}.banner__text-primary[_ngcontent-%COMP%]{font-size:36px}.btn-orange-two[_ngcontent-%COMP%]{background:#04aed4;border-radius:5px;height:44px;font-family:Nunito;font-style:normal;font-weight:600;font-size:15px;line-height:20px;color:#fff}input[type=text][_ngcontent-%COMP%]{width:125%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#fafafa;border:1px solid #92b5dd;font-size:12px}table.client-table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 1em}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{color:#155b75}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;padding-bottom:0}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .school-logo[_ngcontent-%COMP%]{color:#0a1128;font-weight:600;padding-left:1.5rem;position:relative;opacity:none}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .school-logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:15px}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px}.list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff;box-shadow:10px 10px 30px #d3dce766;border-radius:5px}.image-rounded[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;object-fit:cover}.modal-content[_ngcontent-%COMP%]{border-radius:5px!important;border:none;position:relative;background:#000;color:#fff;background:#fff;padding:0rem 2rem}.modal-body[_ngcontent-%COMP%]   .class-btn[_ngcontent-%COMP%]{padding:11px 50px;background:#155b75;color:#fff;border-radius:10px;border:none;outline:none}.email-text[_ngcontent-%COMP%]{color:#000}.client-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 40px}\"]\n    }))();\n  }\n  return MailReportCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}