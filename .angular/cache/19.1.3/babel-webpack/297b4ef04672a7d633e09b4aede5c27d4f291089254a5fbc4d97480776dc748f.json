{"ast":null,"code":"import * as ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/services/data/subject/subject.service\";\nimport * as i3 from \"src/services/data/class/class.service\";\nimport * as i4 from \"src/services/data/assignment/assignment.service\";\nimport * as i5 from \"src/services/classes/notifications/notifications.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@ckeditor/ckeditor5-angular\";\nfunction CreateAssignmentComponent_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"uppercase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const class_r1 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", class_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, class_r1));\n  }\n}\nfunction CreateAssignmentComponent_option_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"uppercase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subject_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", subject_r2.classSubjectId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, subject_r2.subject));\n  }\n}\nfunction CreateAssignmentComponent_label_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 41);\n    i0.ɵɵtext(1, \"Drag files to upload or click\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateAssignmentComponent_label_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.assignmentFile);\n  }\n}\nexport let CreateAssignmentComponent = /*#__PURE__*/(() => {\n  class CreateAssignmentComponent {\n    constructor(fb, subjectService, classService, assignmentService, notifyService, router) {\n      this.fb = fb;\n      this.subjectService = subjectService;\n      this.classService = classService;\n      this.assignmentService = assignmentService;\n      this.notifyService = notifyService;\n      this.router = router;\n      this.Editor = ClassicEditor;\n      this.filename = null;\n      this.textToConvert = {\n        text: ''\n      };\n      this.assignmentFile = null;\n    }\n    ngOnInit() {\n      this.createAssignmentmentForm = this.fb.group({\n        Title: ['', Validators.required],\n        subjectId: ['', Validators.required],\n        assTime: ['', Validators.required],\n        assDate: ['', Validators.required],\n        TotalScore: ['', Validators.required],\n        Document: null\n      });\n      // this.getAllsubjects();\n      // this.getAllClasses();\n      this.getClassAndSubjectForTeacher();\n    }\n    // getAllsubjects() {\n    //   this.subjectService.getAllSubjects().subscribe((data: any) => {\n    //     if (data.hasErrors === false) {\n    //       this.subjectList = data.payload;\n    //       // (this.subjectList);\n    //     }\n    //   });\n    // }\n    getClassAndSubjectForTeacher() {\n      this.classService.getClassAndSubjectForTeacherByTeacherId().subscribe(data => {\n        if (data.hasErrors === false) {\n          // (data.payload);\n          const classList = data.payload;\n          this.classList2 = data.payload;\n          const newArr = [];\n          // tslint:disable-next-line:prefer-for-of\n          for (let i = 0; i < classList.length; i++) {\n            newArr.push(classList[i].class);\n          }\n          // // (this.classList);\n          this.classList = Array.from(new Set(newArr));\n          // (this.classList);\n        }\n      });\n    }\n    getAllClasses() {\n      this.classService.getAllClasses().subscribe(data => {\n        if (data.hasErrors === false) {\n          this.classList = data.payload;\n          // // (this.classList);\n        }\n      });\n    }\n    getSubjects(id) {\n      // (id);\n      const selectedClass = [];\n      // tslint:disable-next-line:prefer-for-of\n      for (let i = 0; i < this.classList2.length; i++) {\n        if (this.classList2[i].class === id) {\n          selectedClass.push(this.classList2[i]);\n        }\n      }\n      // (selectedClass);\n      this.subjectList = selectedClass;\n    }\n    onChange({\n      editor\n    }) {\n      const data = editor.getData();\n      this.data = data;\n      // (data);\n    }\n    handleFileUpload(event) {\n      const reader = new FileReader();\n      if (event.target.files.length > 0) {\n        const file = event.target.files[0];\n        // ('file', file);\n        this.assignmentFile = file.name;\n        this.createAssignmentmentForm.get('Document').setValue(file);\n        // this.iconname = this.icon.name;\n      }\n    }\n    submitAssignment() {\n      const {\n        Title,\n        subjectId,\n        assDate,\n        assTime,\n        TotalScore,\n        Document\n      } = this.createAssignmentmentForm.value;\n      const DueDate = assDate + ' ' + assTime;\n      // tslint:disable-next-line:radix\n      // const SubjectId = parseInt(subjectId);\n      // tslint:disable-next-line:radix\n      const ClassSubjectId = parseInt(subjectId);\n      // tslint:disable-next-line:radix\n      const result = {\n        Title,\n        ClassSubjectId,\n        DueDate,\n        TotalScore,\n        Document\n      };\n      this.assignmentService.addAssignment(result).subscribe(data => {\n        if (data.hasErrors === false) {\n          // (data);\n          this.notifyService.publishMessages('Assignment created successfully', 'info', 1);\n          this.router.navigateByUrl('/teacher/assignments');\n        } else {\n          this.notifyService.publishMessages(data.errors, 'danger', 1);\n        }\n      });\n    }\n    convertFile(filename) {\n      const element = document.createElement('a');\n      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(this.data));\n      element.setAttribute('download', filename);\n      element.style.display = 'none';\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    }\n    back() {\n      window.history.back();\n    }\n    static #_ = (() => this.ɵfac = function CreateAssignmentComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CreateAssignmentComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.SubjectService), i0.ɵɵdirectiveInject(i3.ClassService), i0.ɵɵdirectiveInject(i4.AssignmentService), i0.ɵɵdirectiveInject(i5.NotificationsService), i0.ɵɵdirectiveInject(i6.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CreateAssignmentComponent,\n      selectors: [[\"app-create-assignment\"]],\n      decls: 63,\n      vars: 7,\n      consts: [[\"aria-label\", \"breadcrumb\"], [1, \"breadcrumb\"], [\"src\", \"assets/images/svg/breadcrumb.svg\", \"alt\", \"...\", 1, \"mr-3\"], [\"aria-current\", \"page\", 1, \"breadcrumb-item\", \"a1\", 3, \"click\"], [1, \"fc-lblue\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-12\"], [1, \"my-3\", \"d-flex\", \"align-items-center\"], [\"src\", \"assets/images/svg/create.svg\", \"alt\", \"...\", 1, \"mr-3\"], [1, \"mb-0\"], [1, \"w-100\", 3, \"formGroup\"], [1, \"col-md-12\", \"mb-3\"], [1, \"form-row\"], [1, \"form-group\", \"col-md-3\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"formControlName\", \"Title\", 1, \"form-control\"], [1, \"form-group\", \"col-md-1\"], [\"for\", \"subject\"], [\"id\", \"class\", 1, \"form-control\", 3, \"change\"], [\"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"subject\", \"formControlName\", \"subjectId\", 1, \"form-control\"], [1, \"form-group\", \"col-md-2\"], [\"for\", \"date\"], [\"type\", \"date\", \"name\", \"\", \"id\", \"date\", \"formControlName\", \"assDate\", 1, \"form-control\"], [\"for\", \"time\"], [\"type\", \"time\", \"name\", \"\", \"id\", \"time\", \"formControlName\", \"assTime\", 1, \"form-control\"], [\"type\", \"number\", \"name\", \"\", \"id\", \"time\", \"formControlName\", \"TotalScore\", 1, \"form-control\"], [1, \"row\", \"no-gutters\", \"bg-white\", \"text-editor\"], [1, \"col-md-9\"], [\"name\", \"text\", \"formControlName\", \"Document\", \"data\", \"<p>Hello, world!</p>\", 3, \"change\", \"innerHTML\", \"editor\"], [1, \"col-md-3\", \"attach-file\", \"pl-3\", \"pr-4\", \"pb-4\"], [1, \"pt-3\", \"pb-4\", \"fw-6\"], [1, \"form-group\", \"file-upload\", \"mb-5\"], [\"for\", \"fileupload\", \"class\", \"fs-12\", 4, \"ngIf\"], [\"type\", \"file\", \"id\", \"fileupload\", 1, \"file-input\", 3, \"change\"], [1, \"col-md-12\", \"pl-3\", \"py-2\", \"text-editor-bottom\"], [1, \"btn-upload-top\", \"bg-lblue\", \"mr-3\", 3, \"click\"], [1, \"btn-upload-top\", \"bg-lblue\", 3, \"click\", \"disabled\"], [3, \"value\"], [\"for\", \"fileupload\", 1, \"fs-12\"]],\n      template: function CreateAssignmentComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0)(1, \"ol\", 1);\n          i0.ɵɵelement(2, \"img\", 2);\n          i0.ɵɵelementStart(3, \"li\", 3);\n          i0.ɵɵlistener(\"click\", function CreateAssignmentComponent_Template_li_click_3_listener() {\n            return ctx.back();\n          });\n          i0.ɵɵelementStart(4, \"a\", 4);\n          i0.ɵɵtext(5, \"Back\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8);\n          i0.ɵɵelement(10, \"img\", 9);\n          i0.ɵɵelementStart(11, \"h6\", 10);\n          i0.ɵɵtext(12, \"Create Assignment\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"div\", 11)(14, \"div\", 12)(15, \"div\", 13)(16, \"div\", 14)(17, \"label\", 15);\n          i0.ɵɵtext(18, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 17)(21, \"label\", 18);\n          i0.ɵɵtext(22, \"Class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"select\", 19);\n          i0.ɵɵlistener(\"change\", function CreateAssignmentComponent_Template_select_change_23_listener($event) {\n            return ctx.getSubjects($event.target.value);\n          });\n          i0.ɵɵelementStart(24, \"option\", 20);\n          i0.ɵɵtext(25, \"Select Class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(26, CreateAssignmentComponent_option_26_Template, 3, 4, \"option\", 21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 14)(28, \"label\", 18);\n          i0.ɵɵtext(29, \"Subject\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"select\", 22)(31, \"option\", 20);\n          i0.ɵɵtext(32, \"Select\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(33, CreateAssignmentComponent_option_33_Template, 3, 4, \"option\", 21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 23)(35, \"label\", 24);\n          i0.ɵɵtext(36, \"Due Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(37, \"input\", 25);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\", 23)(39, \"label\", 26);\n          i0.ɵɵtext(40, \"Time\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(41, \"input\", 27);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"div\", 17)(43, \"label\", 26);\n          i0.ɵɵtext(44, \"Grade Score\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(45, \"input\", 28);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(46, \"div\", 7)(47, \"div\", 29)(48, \"div\", 30)(49, \"ckeditor\", 31);\n          i0.ɵɵlistener(\"change\", function CreateAssignmentComponent_Template_ckeditor_change_49_listener($event) {\n            return ctx.onChange($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(50, \"div\", 32)(51, \"p\", 33);\n          i0.ɵɵtext(52, \"Attach File\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"form\")(54, \"div\", 34);\n          i0.ɵɵtemplate(55, CreateAssignmentComponent_label_55_Template, 2, 0, \"label\", 35)(56, CreateAssignmentComponent_label_56_Template, 2, 1, \"label\", 35);\n          i0.ɵɵelementStart(57, \"input\", 36);\n          i0.ɵɵlistener(\"change\", function CreateAssignmentComponent_Template_input_change_57_listener($event) {\n            return ctx.handleFileUpload($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(58, \"div\", 37)(59, \"button\", 38);\n          i0.ɵɵlistener(\"click\", function CreateAssignmentComponent_Template_button_click_59_listener() {\n            return ctx.convertFile(\"assignment\");\n          });\n          i0.ɵɵtext(60, \"Convert File\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"button\", 39);\n          i0.ɵɵlistener(\"click\", function CreateAssignmentComponent_Template_button_click_61_listener() {\n            return ctx.submitAssignment();\n          });\n          i0.ɵɵtext(62, \"Create\");\n          i0.ɵɵelementEnd()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"formGroup\", ctx.createAssignmentmentForm);\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngForOf\", ctx.classList);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.subjectList);\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"editor\", ctx.Editor);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.assignmentFile === null);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.assignmentFile !== null);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", ctx.createAssignmentmentForm.invalid);\n        }\n      },\n      dependencies: [i7.NgForOf, i7.NgIf, i8.CKEditorComponent, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.NgForm, i7.UpperCasePipe],\n      styles: [\".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:.75rem 0;margin-bottom:1rem;list-style:none;background-color:transparent;border-radius:.25rem;cursor:pointer}a[_ngcontent-%COMP%]{color:#1b5bac;font-weight:400;cursor:pointer}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#1b5bac;content:\\\">\\\";font-size:10px;display:none}h6[_ngcontent-%COMP%]{font-size:20px}.text-editor[_ngcontent-%COMP%]{background:#fff;border:1px solid #94b3d1;border-radius:5px}.text-editor-bottom[_ngcontent-%COMP%]{background:#edf1f5;border:1px solid #94b3d1}.btn-upload-top[_ngcontent-%COMP%]{border:none;outline:none;padding:11px 30px;background:#155b75;color:#fff;border-radius:10px}.attach-file[_ngcontent-%COMP%]{border-left:1px solid #94b3d1}.attach-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{position:relative;background-image:url(file-upload.svg);background-repeat:no-repeat;background-position:110px 75px;background-color:#94b1d14f;border:2px dashed #abc3df;border-radius:5px;height:240px}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:110px;right:65px;text-align:center;display:flex;align-items:center}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]:focus{outline:none}.attach-file[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-upload[_ngcontent-%COMP%]{position:absolute;top:154px;right:52px;border:none;outline:none;padding:11px 40px;background:#155b75;color:#fff;font-size:13px;border-radius:10px}.ck.ck-toolbar[_ngcontent-%COMP%] > .ck-toolbar__items[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1;border:none;background:red}.ck.ck-content.ck-editor__editable.ck-rounded-corners.ck-editor__editable_inline.ck-blurred[_ngcontent-%COMP%]{border:0}.ck.ck-editor__main[_ngcontent-%COMP%] > .ck-editor__editable[_ngcontent-%COMP%]:not(.ck-focused){border-color:unset!important}.ck.ck-editor__editable_inline[_ngcontent-%COMP%]{overflow:auto;padding:0!important;height:50vh;border:none!important}\"]\n    }))();\n  }\n  return CreateAssignmentComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}