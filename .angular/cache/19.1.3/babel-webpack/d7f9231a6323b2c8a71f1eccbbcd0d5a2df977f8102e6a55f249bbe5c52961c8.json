{"ast":null,"code":"import { Chart } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/data/promotion/promotion.service\";\nimport * as i2 from \"src/services/data/assessment/assessment.service\";\nimport * as i3 from \"src/services/data/school-section/school-section.service\";\nimport * as i4 from \"src/services/data/class/class.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = [\"distributionChart\"];\nconst _c1 = [\"deviationChart\"];\nfunction PromotionDashboardComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const level_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", level_r2 == null ? null : level_r2.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(level_r2 == null ? null : level_r2.name);\n  }\n}\nfunction PromotionDashboardComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const class_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", class_r3 == null ? null : class_r3.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", class_r3.name, \"\", class_r3 == null ? null : class_r3.classGroup, \" \");\n  }\n}\nexport let PromotionDashboardComponent = /*#__PURE__*/(() => {\n  class PromotionDashboardComponent {\n    constructor(promotion, assessment, schoolSectionService, classService) {\n      this.promotion = promotion;\n      this.assessment = assessment;\n      this.schoolSectionService = schoolSectionService;\n      this.classService = classService;\n      this.chart = [];\n      this.deviationChrt = [];\n    }\n    ngOnInit() {\n      this.createDistributionChart();\n      this.createDeviationChart();\n      this.getCurrentSession();\n      this.getSections();\n    }\n    getCurrentSession() {\n      this.assessment.getCurrentSession().subscribe(res => {\n        if (res.hasErrors === false) {\n          this.currentSesion = res.payload.id;\n          console.log(this.currentSesion);\n          this.getPromotionHightlights(this.currentSesion);\n        }\n      });\n    }\n    getSections() {\n      this.schoolSectionService.getSection().subscribe(res => {\n        // tslint:disable-next-line:no-string-literal\n        this.levels = res['payload'];\n        // this.levels = this.levels.reverse();\n        // ('levels', this.levels);\n      });\n    }\n    getClassBySectionId(id) {\n      // (id);\n      this.classService.getClassBySection(id).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.classList = data.payload;\n          // (this.classList);\n        }\n      });\n    }\n    getPromotionHightlights(id, classId) {\n      this.promotion.getPromotionHighlight(id, classId).subscribe(res => {\n        if (res.hasErrors === false) {\n          console.log('sdsd', res);\n        }\n      });\n    }\n    createDistributionChart() {\n      const DATA_COUNT = 12;\n      const label = [];\n      for (let i = 0; i < DATA_COUNT; i++) {\n        label.push(i.toString());\n      }\n      const dataPoints = [0, 20, 20, 60, 60, 120, 80, 180, 120, 125, 105, 110, 170];\n      this.chart = new Chart(this.distributionChartRef.nativeElement, {\n        type: 'line',\n        data: {\n          labels: label,\n          datasets: [{\n            label: 'Distribution Chart',\n            data: dataPoints,\n            borderColor: ['#EA2604'],\n            backgroundColor: ['#FFF7F0']\n            // backgroundColor: ['#e76f51', '#ffb638', '#ffb638' , '#ffb638', '#ffb638'],\n            // hoverBorderColor: '#4288DC',\n            // hoverBorderWidth: 3\n          }]\n        },\n        options: {\n          responsive: true,\n          cutoutPercentage: 70,\n          legend: {\n            display: true,\n            labelString: 'Class Attendance'\n          },\n          scales: {\n            xAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: true,\n                // labelString: 'Attendance Chart',\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: true\n              }\n            }],\n            yAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: true,\n                // labelString: 'No of students',\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: false\n              },\n              ticks: {\n                beginAtZero: true\n              }\n            }]\n          }\n        }\n      });\n    }\n    createDeviationChart() {\n      const DATA_COUNT = 12;\n      const label = [];\n      for (let i = 0; i < DATA_COUNT; i++) {\n        label.push(i.toString());\n      }\n      const dataPoints = [0, 20, 20, 60, 60, 120, 80, 180, 120, 125, 105, 110, 170];\n      this.deviationChrt = new Chart(this.deviationChartRef.nativeElement, {\n        type: 'line',\n        data: {\n          labels: label,\n          datasets: [{\n            label: 'Deviation Chart',\n            data: dataPoints,\n            borderColor: ['#EA2604'],\n            backgroundColor: ['#FFF7F0']\n            // backgroundColor: ['#e76f51', '#ffb638', '#ffb638' , '#ffb638', '#ffb638'],\n            // hoverBorderColor: '#4288DC',\n            // hoverBorderWidth: 3\n          }]\n        },\n        options: {\n          responsive: true,\n          cutoutPercentage: 70,\n          legend: {\n            display: true,\n            labelString: 'Class Attendance'\n          },\n          scales: {\n            xAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: true,\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: true\n              }\n            }],\n            yAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: true,\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: false\n              },\n              ticks: {\n                beginAtZero: true\n              }\n            }]\n          }\n        }\n      });\n    }\n    static #_ = (() => this.ɵfac = function PromotionDashboardComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PromotionDashboardComponent)(i0.ɵɵdirectiveInject(i1.PromotionService), i0.ɵɵdirectiveInject(i2.AssessmentService), i0.ɵɵdirectiveInject(i3.SchoolSectionService), i0.ɵɵdirectiveInject(i4.ClassService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PromotionDashboardComponent,\n      selectors: [[\"app-promotion-dashboard\"]],\n      viewQuery: function PromotionDashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 7);\n          i0.ɵɵviewQuery(_c1, 7);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.distributionChartRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deviationChartRef = _t.first);\n        }\n      },\n      decls: 40,\n      vars: 4,\n      consts: [[\"distributionChart\", \"\"], [\"deviationChart\", \"\"], [1, \"banner\", \"mb-4\", \"pb-3\"], [1, \"pt-5\", \"pl-3\", \"content\"], [1, \"banner__text-primary\", \"fw-6\"], [1, \"text-white\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"bg-white\", \"p-3\", \"mb-2\"], [1, \"row\"], [1, \"col\"], [\"for\", \"class\", 1, \"fs-12\", \"fw-6\"], [\"name\", \"\", \"id\", \"\", 1, \"form-control\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"charts\"], [1, \"my-3\", \"bg-white\", \"px-3\", \"py-3\"], [1, \"fw-6\"], [1, \"col-md-12\", \"mt-4\"], [\"role\", \"img\", 2, \"height\", \"300px\", \"width\", \"100%\"], [3, \"value\"]],\n      template: function PromotionDashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\")(1, \"section\", 2)(2, \"div\", 3)(3, \"h6\", 4);\n          i0.ɵɵtext(4, \" Promotion Dashboard \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 5);\n          i0.ɵɵtext(6, \" View Analysis of promotions in your school \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\")(9, \"form\")(10, \"div\", 7)(11, \"div\", 8)(12, \"label\", 9);\n          i0.ɵɵtext(13, \"Level\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"select\", 10);\n          i0.ɵɵlistener(\"change\", function PromotionDashboardComponent_Template_select_change_14_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.getClassBySectionId($event.target.value));\n          });\n          i0.ɵɵelementStart(15, \"option\", 11);\n          i0.ɵɵtext(16, \"Select level\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, PromotionDashboardComponent_option_17_Template, 2, 2, \"option\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 8)(19, \"label\", 9);\n          i0.ɵɵtext(20, \"Class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"select\", 10);\n          i0.ɵɵlistener(\"change\", function PromotionDashboardComponent_Template_select_change_21_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.getPromotionHightlights(ctx.currentSesion, $event.target.value));\n          });\n          i0.ɵɵelementStart(22, \"option\", 11);\n          i0.ɵɵtext(23, \"Select class\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, PromotionDashboardComponent_option_24_Template, 2, 3, \"option\", 12);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(25, \"section\", 13)(26, \"div\", 14)(27, \"p\", 15);\n          i0.ɵɵtext(28, \"Distribution of class mark\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"div\", 16)(30, \"canvas\", 17, 0);\n          i0.ɵɵtext(32);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(33, \"div\", 14)(34, \"p\", 15);\n          i0.ɵɵtext(35, \"Standard Deviation of class mark\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"div\", 16)(37, \"canvas\", 17, 1);\n          i0.ɵɵtext(39);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const distributionChart_r4 = i0.ɵɵreference(31);\n          const deviationChart_r5 = i0.ɵɵreference(38);\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngForOf\", ctx.levels);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.classList);\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\" \", distributionChart_r4, \" \");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\" \", deviationChart_r5, \" \");\n        }\n      },\n      dependencies: [i5.NgForOf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.NgControlStatusGroup, i6.NgForm],\n      styles: [\".banner[_ngcontent-%COMP%]{width:100%;background-image:url(client-banner.svg);background-repeat:no-repeat;background-color:#422610;background-size:cover;background-position:center;border-radius:10px;display:flex;justify-content:space-between;align-items:flex-end;padding:0 1.5rem;color:#fff;position:relative;background-blend-mode:multiply;mix-blend-mode:multiply;-webkit-backdrop-filter:opacity(.4);backdrop-filter:opacity(.4)}.banner__text-primary[_ngcontent-%COMP%]{font-size:36px}.btn-orange-two[_ngcontent-%COMP%]{background:#04aed4;border-radius:5px;height:44px;font-family:Nunito;font-style:normal;font-weight:600;font-size:15px;line-height:20px;color:#fff}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}input[type=text].search[_ngcontent-%COMP%]{width:125%}input[type=text][_ngcontent-%COMP%]{background:#fff;border:1px solid #ecebed;box-sizing:border-box;box-shadow:0 7px 64px #00000012;border-radius:6px}input[_ngcontent-%COMP%]::placeholder{color:#d0c9d6;font-size:15px}\"]\n    }))();\n  }\n  return PromotionDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}