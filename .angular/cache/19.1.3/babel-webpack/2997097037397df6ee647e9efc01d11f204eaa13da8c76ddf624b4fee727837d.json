{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { MustMatch } from 'src/services/utils/mustMatch';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/services/data/auth/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/services/classes/notifications/notifications.service\";\nimport * as i5 from \"@angular/common\";\nfunction ResetPasswordComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Password is weak. Should be more than 6 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ResetPasswordComponent_div_20_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.resetPasswordForm.controls.password.errors.minlength);\n  }\n}\nfunction ResetPasswordComponent_div_25_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Kindly confirm your password \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_25_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Password must match. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ResetPasswordComponent_div_25_div_1_Template, 2, 0, \"div\", 25)(2, ResetPasswordComponent_div_25_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.resetPasswordForm.controls.confirmPassword.errors.required);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.resetPasswordForm.controls.confirmPassword.errors.mustMatch);\n  }\n}\nexport let ResetPasswordComponent = /*#__PURE__*/(() => {\n  class ResetPasswordComponent {\n    constructor(fb, auth, route, notifyService, router) {\n      this.fb = fb;\n      this.auth = auth;\n      this.route = route;\n      this.notifyService = notifyService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.validationToken = sessionStorage.getItem('tk');\n      this.verificationUrl = this.route.snapshot.queryParams;\n      const {\n        code\n      } = this.verificationUrl;\n      // // (this.validationToken);\n      //     // (code);\n      if (this.validationToken === null) {\n        sessionStorage.setItem('tk', code);\n        this.validationToken = sessionStorage.getItem('tk');\n        // // ('no token use uRL');\n      } else {\n        this.validationToken = sessionStorage.getItem('tk');\n      }\n      // this.validationToken = sessionStorage.getItem('tk');\n      this.resetPasswordForm = this.fb.group({\n        password: ['', [Validators.required, Validators.minLength(6)]],\n        confirmPassword: ['', Validators.required]\n      }, {\n        validator: MustMatch('password', 'confirmPassword')\n      });\n    }\n    resetPassword() {\n      const {\n        password\n      } = this.resetPasswordForm.value;\n      const result = {\n        token: this.validationToken,\n        newPassword: password\n      };\n      // // (result);\n      this.auth.requestPasswordReset(result).subscribe(data => {\n        if (data.hasErrors === false) {\n          // (data.payload);\n          this.notifyService.publishMessages(data.description, 'success', 1);\n          this.router.navigateByUrl('/');\n        } else {\n          this.notifyService.publishMessages(data.errors, 'danger', 1);\n        }\n      }, error => {\n        // // (error);\n      });\n    }\n    static #_ = (() => this.ɵfac = function ResetPasswordComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ResetPasswordComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.NotificationsService), i0.ɵɵdirectiveInject(i3.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ResetPasswordComponent,\n      selectors: [[\"app-reset-password\"]],\n      decls: 37,\n      vars: 4,\n      consts: [[1, \"\"], [1, \"kids\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\", \"pt-lg-4\", \"pt-2\", \"mb-lg-5\", \"mb-3\"], [\"src\", \"assets/images/newLogo.png\", \"alt\", \"\", 2, \"width\", \"70px\", \"object-fit\", \"contain\"], [1, \"col-lg-6\", \"m-auto\"], [1, \"whitediv\", \"p-lg-5\", \"p-3\", \"mt-lg-5\", \"mt-3\"], [1, \"col-lg-7\", \"mb-3\"], [1, \"fs-30\", \"ff-n\", \"fw-6\"], [1, \"col-lg-12\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"col-lg-12\", \"mb-3\"], [\"for\", \"\", 1, \"fs-16\", \"ff-n\", \"fw-6\", \"fc-dark\", \"m-0\"], [1, \"fs-12\", \"ff-n\", \"fc-dark\", \"mb-3\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\", \"reg-form\"], [4, \"ngIf\"], [1, \"col-lg-12\", \"mb-5\"], [\"type\", \"password\", \"formControlName\", \"confirmPassword\", 1, \"form-control\", \"reg-form\"], [1, \"btn\", \"btn-orange\", \"w-100\", 3, \"disabled\"], [1, \"col-12\"], [1, \"text-center\"], [1, \"foot\", \"bg-dark\", \"py-3\"], [1, \"fc-grey\", \"ff-a\", \"fs-12\", \"m-0\", \"text-center\"], [1, \"fw-6\", \"ls-7\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"text-danger\"]],\n      template: function ResetPasswordComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n          i0.ɵɵelement(5, \"img\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7)(8, \"div\", 3)(9, \"div\", 8)(10, \"p\", 9);\n          i0.ɵɵtext(11, \"First time login?\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 10)(13, \"form\", 11);\n          i0.ɵɵlistener(\"ngSubmit\", function ResetPasswordComponent_Template_form_ngSubmit_13_listener() {\n            return ctx.resetPassword();\n          });\n          i0.ɵɵelementStart(14, \"div\", 12)(15, \"p\", 13);\n          i0.ɵɵtext(16, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"small\", 14);\n          i0.ɵɵtext(18, \"Please enter your password below.\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 15);\n          i0.ɵɵtemplate(20, ResetPasswordComponent_div_20_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 17)(22, \"p\", 13);\n          i0.ɵɵtext(23, \" Confirm Password \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"input\", 18);\n          i0.ɵɵtemplate(25, ResetPasswordComponent_div_25_Template, 3, 2, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 17)(27, \"button\", 19);\n          i0.ɵɵtext(28, \" Reset Password \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(29, \"div\", 20);\n          i0.ɵɵelement(30, \"p\", 21);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(31, \"div\", 22)(32, \"p\", 23);\n          i0.ɵɵtext(33, \" \\u00A9 2020. \");\n          i0.ɵɵelementStart(34, \"span\", 24);\n          i0.ɵɵtext(35, \"SchoolTrack\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(36, \" - All rights reserved \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"formGroup\", ctx.resetPasswordForm);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.resetPasswordForm.controls.password.touched && ctx.resetPasswordForm.controls.password.invalid);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.resetPasswordForm.controls.confirmPassword.touched && ctx.resetPasswordForm.controls.confirmPassword.invalid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.resetPasswordForm.invalid);\n        }\n      },\n      dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".kids[_ngcontent-%COMP%]{background:url(kids.png);background-size:cover;min-height:93vh}.foot[_ngcontent-%COMP%]{height:7vh}.whitediv[_ngcontent-%COMP%]{background:#fff;box-shadow:0 20px 50px #0d2944;border-radius:10px}.resetdiv[_ngcontent-%COMP%]{height:40vh;display:flex;align-items:center;justify-content:center;flex-flow:column}\"]\n    }))();\n  }\n  return ResetPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}