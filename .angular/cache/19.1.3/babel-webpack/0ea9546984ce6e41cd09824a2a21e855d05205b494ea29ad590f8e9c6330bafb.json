{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport { Chart } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/data/school/school.service\";\nimport * as i2 from \"src/services/data/student/student.service\";\nimport * as i3 from \"src/services/classes/notifications/notifications.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"barChart\"];\nfunction SchoolManagerDashboardComponent_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const school_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", school_r2.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(school_r2.name);\n  }\n}\nexport let SchoolManagerDashboardComponent = /*#__PURE__*/(() => {\n  class SchoolManagerDashboardComponent {\n    constructor(schoolService, studentservice, notifyService) {\n      this.schoolService = schoolService;\n      this.studentservice = studentservice;\n      this.notifyService = notifyService;\n      this.p = 1;\n      this.itemsPerPage = 5;\n      this.chart = [];\n      this.barChart = [];\n    }\n    ngOnInit() {\n      const helper = new JwtHelperService();\n      this.adminDetails = helper.decodeToken(localStorage.getItem('access_token'));\n      this.loginDate = this.adminDetails.last_login_time + ' ' + 'UTC';\n      this.groupId = this.adminDetails.SchGroupId;\n      console.log(this.adminDetails);\n      this.greeting();\n      this.getAllSchool();\n      this.getGroupOfSchoolsData(this.groupId, this.id);\n    }\n    getAllSchool() {\n      this.schoolService.getAllGroupsInASchool(this.p, this.itemsPerPage, this.adminDetails.SchGroupId).subscribe(data => {\n        if (data) {\n          this.registeredSchools = data.payload;\n          // this.clientList.reverse();\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    switchSwitch(id) {\n      this.createBarChart();\n      this.schoolService.getSchoolGroupAnalytics(id).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.schoolCount = data.payload.studentsCount;\n          // this.clientList.reverse();\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    switchSwitchSchoolGroup(id) {\n      this.schoolService.getGroupOfSchoolsSchoolData(this.groupId, id).subscribe(data => {\n        if (data.hasErrors === false) {\n          this.totalStudents = data.payload.totalStudents;\n          this.totalStaffs = data.payload.totalStaffs;\n          this.totalUser = data.payload.totalUsers;\n          // this.clientList.reverse();\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    getSelectedSchoolInfo() {\n      this.schoolService.getAllGroupsInASchool(this.p, this.itemsPerPage, this.adminDetails.SchGroupId).subscribe(data => {\n        if (data) {\n          this.registeredSchools = data.payload;\n          // this.schoolCount = data.totalCount;\n          this.schoolCount = data.payload.length;\n          // this.clientList.reverse();\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    getAllStudents() {\n      this.studentservice.getAllStudents(this.p, this.itemsPerPage).subscribe(res => {\n        this.studentCount = res.totalCount;\n      });\n    }\n    getGroupOfSchoolsData(groupId, id) {\n      this.schoolService.getGroupOfSchoolsSchoolData(this.groupId, this.id).subscribe(res => {\n        console.log(res);\n        this.totalStudents = res.payload.totalStudents;\n        this.totalUser = res.payload.totalUsers;\n        this.totalStaffs = res.payload.totalStaffs;\n      });\n    }\n    createBarChart() {\n      const classTopics = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n      this.chart = new Chart(this.barChartRef.nativeElement, {\n        type: 'bar',\n        data: {\n          labels: classTopics,\n          datasets: [{\n            label: 'Fee',\n            data: [12, 34, 56, 78, 80, 12, 2, 5, 6, 7, 6.9, 56],\n            // borderColor: ['#EA2604'],\n            backgroundColor: ['#17C7BF']\n            // backgroundColor: ['#e76f51', '#ffb638'],\n            // hoverBorderColor: '#4288DC',\n            // hoverBorderWidth: 3\n          }]\n        },\n        options: {\n          responsive: true,\n          // cutoutPercentage: 70,\n          legend: {\n            display: true,\n            labelString: 'Class Attendance'\n          },\n          scales: {\n            xAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: false,\n                labelString: 'Fee Chart',\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: false\n              }\n            }],\n            yAxes: [{\n              stacked: true,\n              display: true,\n              scaleLabel: {\n                display: false,\n                labelString: 'No of students',\n                fontColor: 'black',\n                fontFamily: 'Nunito',\n                fontSize: 16\n              },\n              gridLines: {\n                display: false\n              },\n              ticks: {\n                beginAtZero: true\n              }\n            }]\n          }\n        }\n      });\n    }\n    greeting() {\n      const myDate = new Date();\n      const hrs = myDate.getHours();\n      if (hrs < 12) {\n        this.greet = 'Good Morning';\n      } else if (hrs >= 12 && hrs <= 17) {\n        this.greet = 'Good Afternoon';\n      } else if (hrs >= 17 && hrs <= 24) {\n        this.greet = 'Good Evening';\n      }\n    }\n    static #_ = (() => this.ɵfac = function SchoolManagerDashboardComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SchoolManagerDashboardComponent)(i0.ɵɵdirectiveInject(i1.SchoolService), i0.ɵɵdirectiveInject(i2.StudentService), i0.ɵɵdirectiveInject(i3.NotificationsService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SchoolManagerDashboardComponent,\n      selectors: [[\"app-school-manager-dashboard\"]],\n      viewQuery: function SchoolManagerDashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 7);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.barChartRef = _t.first);\n        }\n      },\n      decls: 72,\n      vars: 11,\n      consts: [[\"barChart\", \"\"], [1, \"main\"], [1, \"mt-2\", \"mb-3\", \"d-flex\", \"justify-content-end\"], [1, \"form-control\", \"w-25\", \"school-drop\", 3, \"change\"], [\"value\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"banner\", \"mb-4\", \"d-flex\", \"justify-content-between\"], [1, \"banner__text-primary\", \"py-4\", \"pl-5\"], [1, \"justify-content-end\"], [1, \"last-login\", \"pt-3\", \"pr-5\", \"fw-6\"], [1, \"cards\", \"mb-4\"], [1, \"revenue\"], [\"src\", \"assets/images/svg/revenue.svg\", \"alt\", \"card revenue icon\"], [1, \"revenue__text\", \"pt-4\"], [1, \"pr-4\"], [1, \"pt-1\"], [1, \"schools\"], [\"src\", \"assets/images/svg/students-number.svg\", \"alt\", \"card school icon\"], [1, \"revenue__text\"], [1, \"pt-3\", \"pr-4\"], [1, \"students\"], [\"src\", \"assets/images/svg/students-number.svg\", \"alt\", \"number of students icon\"], [1, \"sms\"], [\"src\", \"assets/images/svg/students-number.svg\", \"alt\", \"total sms used icon\"], [1, \"info\"], [1, \"info__school\"], [1, \"info__school-info\"], [1, \"line\"], [1, \"row\", \"mt-3\", \"px-3\"], [1, \"col-md-12\", \"mt-4\", 2, \"position\", \"relative\", \"height\", \"45vh\"], [\"role\", \"img\"], [1, \"def\"], [1, \"info__chart\", \"mb-3\"], [1, \"info__chart-info\"], [1, \"line2\"], [1, \"info__chart-info\", \"mb-3\"], [1, \"mt-3\"], [3, \"value\"]],\n      template: function SchoolManagerDashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"select\", 3);\n          i0.ɵɵlistener(\"change\", function SchoolManagerDashboardComponent_Template_select_change_2_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            ctx.switchSwitchSchoolGroup($event.target.value);\n            return i0.ɵɵresetView(ctx.switchSwitch($event.target.value));\n          });\n          i0.ɵɵelementStart(3, \"option\", 4);\n          i0.ɵɵtext(4, \"Select school\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, SchoolManagerDashboardComponent_option_5_Template, 2, 2, \"option\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"section\", 6)(7, \"p\", 7);\n          i0.ɵɵtext(8);\n          i0.ɵɵelement(9, \"br\");\n          i0.ɵɵelementStart(10, \"span\");\n          i0.ɵɵtext(11);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 8)(13, \"p\", 9);\n          i0.ɵɵtext(14);\n          i0.ɵɵpipe(15, \"date\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(16, \"section\", 10)(17, \"div\", 11);\n          i0.ɵɵelement(18, \"img\", 12);\n          i0.ɵɵelementStart(19, \"div\", 13)(20, \"h6\", 14);\n          i0.ɵɵtext(21, \"0\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"p\", 15);\n          i0.ɵɵtext(23, \"NGN\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"p\");\n          i0.ɵɵtext(25, \"Revenue Generated\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 16);\n          i0.ɵɵelement(27, \"img\", 17);\n          i0.ɵɵelementStart(28, \"div\", 18)(29, \"h6\", 19);\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"p\");\n          i0.ɵɵtext(32, \"Registered Students\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"div\", 20);\n          i0.ɵɵelement(34, \"img\", 21);\n          i0.ɵɵelementStart(35, \"div\", 18)(36, \"h6\", 19);\n          i0.ɵɵtext(37);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"p\");\n          i0.ɵɵtext(39, \"No. of Employees\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(40, \"div\", 22);\n          i0.ɵɵelement(41, \"img\", 23);\n          i0.ɵɵelementStart(42, \"div\", 18)(43, \"h6\", 19);\n          i0.ɵɵtext(44);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(45, \"p\");\n          i0.ɵɵtext(46, \"Total Users\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(47, \"section\", 24)(48, \"div\", 25)(49, \"div\", 26)(50, \"div\", 27)(51, \"h6\");\n          i0.ɵɵtext(52, \" School Fees Payment Analysis\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(53, \"div\", 28)(54, \"div\", 29)(55, \"canvas\", 30, 0);\n          i0.ɵɵtext(57);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(58, \"div\", 31)(59, \"div\", 32)(60, \"div\", 33)(61, \"div\", 34)(62, \"h6\");\n          i0.ɵɵtext(63, \" Staff Attendance Report\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(64, \"div\", 32)(65, \"div\", 35)(66, \"div\", 34)(67, \"h6\");\n          i0.ɵɵtext(68, \" Revenue by Schools\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(69, \"p\");\n          i0.ɵɵtext(70, \"See the top grossing schools across the application\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(71, \"div\", 36);\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          const barChart_r3 = i0.ɵɵreference(56);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.registeredSchools);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"\", ctx.greet, \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.adminDetails.given_name);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Last Login: \", i0.ɵɵpipeBind2(15, 8, ctx.loginDate, \"medium\"), \"\");\n          i0.ɵɵadvance(16);\n          i0.ɵɵtextInterpolate1(\"\", ctx.totalStudents, \" \");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.totalStaffs);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.totalUser);\n          i0.ɵɵadvance(13);\n          i0.ɵɵtextInterpolate1(\" \", barChart_r3, \" \");\n        }\n      },\n      dependencies: [i4.NgForOf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i4.DatePipe],\n      styles: [\".main[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%;background-image:url(banner.svg);background-repeat:no-repeat;background-size:cover;border-radius:10px}.banner[_ngcontent-%COMP%]   .banner__text-primary[_ngcontent-%COMP%]{color:#04aed4;font-size:32px;font-family:Nunito;font-weight:200}.banner[_ngcontent-%COMP%]   .banner__text-primary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:32px;font-weight:400}.last-login[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-family:Nunito}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1fr 1fr 1fr;grid-gap:1rem;justify-content:space-between;margin-top:2.2rem}.cards[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:1.9rem 1.5rem 1rem;font-family:Nunito}.cards[_ngcontent-%COMP%]   .revenue[_ngcontent-%COMP%]{background:#0b8e88;box-shadow:0 10px 20px #0b8e8833;border-radius:10px;color:#d9fcfa}.revenue__text[_ngcontent-%COMP%]{display:flex;align-items:center}.revenue__text[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:32px;line-height:44px}.cards[_ngcontent-%COMP%]   .schools[_ngcontent-%COMP%]{background:#018fcb;box-shadow:0 10px 20px #018fcb33;border-radius:10px;color:#d6f3ff}.cards[_ngcontent-%COMP%]   .students[_ngcontent-%COMP%]{background:#e78413;box-shadow:0 10px 20px #018fcb33;border-radius:10px;color:#fdf5ed}.cards[_ngcontent-%COMP%]   .sms[_ngcontent-%COMP%]{background:#f05f5c;box-shadow:0 10px 20px #018fcb33;border-radius:10px;color:#fde8e8}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.25fr 1fr;grid-gap:1rem;justify-content:space-between;margin-top:2.2rem}.info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{background:#fff;box-shadow:0 20px 40px #d3dce766;border-radius:10px;font-family:Nunito}.def[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-gap:1rem}.def[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#fff;box-shadow:0 20px 40px #d3dce766;border-radius:10px;font-family:Nunito}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%], .info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:2rem 1.5rem 1rem}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#0a1128;font-weight:600;font-size:18px}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0a1128;font-weight:400;font-size:14px}.info__school-info[_ngcontent-%COMP%]   .btn-see-all[_ngcontent-%COMP%]{background:#f0f1f4;border-radius:100px;border:none;outline:none;padding:2px 25px;color:#243c67}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:relative;width:80%}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;width:80%;height:2px;background:#04aed4;left:0;bottom:0}.info__school[_ngcontent-%COMP%]   .info__school-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;width:100%;height:2px;background:#fb882c4d;left:0;bottom:0}.info__school[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0a1128;font-weight:600;padding-left:1.5rem}.info__school[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0a1128;margin-bottom:0;font-weight:600}.info__school[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-bottom:1px solid #e1e3ea;color:#133960;opacity:.6;font-weight:400}.info__school[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding-left:1.5rem;font-weight:400}.info__school[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f6f7f9}.info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]   .line2[_ngcontent-%COMP%]{position:relative;width:100%}.info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]   .line2[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;width:80%;height:2px;background:#04aed4;left:0;bottom:0}.info__chart[_ngcontent-%COMP%]   .info__chart-info[_ngcontent-%COMP%]   .line2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:88%;height:2px;background:#fb882c4d;left:34px;bottom:0}.row-sizing[_ngcontent-%COMP%]{padding:1.5rem 4rem 1rem 2rem}.image-rounded[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;object-fit:cover}.school-drop[_ngcontent-%COMP%]{border-radius:5px;background:#243c67;color:#fff;font-size:12px}.reports[_ngcontent-%COMP%]{border-radius:8px}.present[_ngcontent-%COMP%]{background:#e7fef8}.absent[_ngcontent-%COMP%]{background:#f8e2e4}.leave[_ngcontent-%COMP%]{background:#fbead0}@media screen and (max-width: 600px){.cards[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}}\"]\n    }))();\n  }\n  return SchoolManagerDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}