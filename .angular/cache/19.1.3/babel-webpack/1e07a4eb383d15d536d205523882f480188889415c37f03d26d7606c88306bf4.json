{"ast":null,"code":"import { from, zip, of } from 'rxjs';\nimport { groupBy, mergeMap, toArray } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/services/data/admin/admin.service\";\nimport * as i3 from \"src/services/classes/notifications/notifications.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction NewroleComponent_tr_27_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 21)(1, \"div\", 22)(2, \"input\", 23);\n    i0.ɵɵlistener(\"change\", function NewroleComponent_tr_27_td_3_Template_input_change_2_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.getID($event.target.value));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\", 24);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const permission_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"customCheck\", permission_r3.id, \"\");\n    i0.ɵɵproperty(\"value\", permission_r3.id);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"for\", \"customCheck\", permission_r3.id, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(permission_r3.name);\n  }\n}\nfunction NewroleComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 18)(1, \"td\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, NewroleComponent_tr_27_td_3_Template, 5, 6, \"td\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const role_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", role_r4[0], \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", role_r4[1]);\n  }\n}\nexport let NewroleComponent = /*#__PURE__*/(() => {\n  class NewroleComponent {\n    constructor(fb, adminService, notifyService, router) {\n      this.fb = fb;\n      this.adminService = adminService;\n      this.notifyService = notifyService;\n      this.router = router;\n      this.roleData = {\n        name: '',\n        permissions: []\n      };\n    }\n    ngOnInit() {\n      this.getRolesPermissions();\n    }\n    back() {\n      window.history.back();\n    }\n    getRolesPermissions() {\n      this.adminService.getAllPermissions().subscribe(data => {\n        if (data.hasErrors === false) {\n          this.allRoles = data.payload;\n          // ('asasasas', this.allRoles);\n          const tires = [];\n          from(this.allRoles).pipe(groupBy(person => person.name.split('_')[0]), mergeMap(group => zip(of(group.key), group.pipe(toArray())))).subscribe(xy => {\n            // ('levels', ...xy);\n            tires.push(xy);\n          });\n          this.newList = tires;\n          // ('sasas', this.newList);\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    getID(event) {\n      this.roleData.permissions.push(event);\n    }\n    createRoles() {\n      const {\n        name,\n        permissions\n      } = this.roleData;\n      const permissionIds = permissions.map(i => Number(i));\n      // (permissionIds);\n      const result = {\n        name,\n        permissionIds\n      };\n      // (this.roleData);\n      this.adminService.createRoles(result).subscribe(data => {\n        // (data);\n        this.notifyService.publishMessages('Roles created successfully', 'info', 1);\n        this.router.navigateByUrl('/admin/users');\n      }, error => {\n        this.notifyService.publishMessages(error.errors, 'danger', 1);\n      });\n    }\n    static #_ = (() => this.ɵfac = function NewroleComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || NewroleComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AdminService), i0.ɵɵdirectiveInject(i3.NotificationsService), i0.ɵɵdirectiveInject(i4.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NewroleComponent,\n      selectors: [[\"app-newrole\"]],\n      decls: 33,\n      vars: 2,\n      consts: [[\"aria-label\", \"breadcrumb\"], [1, \"breadcrumb\", 3, \"click\"], [\"src\", \"assets/images/svg/breadcrumb.svg\", \"alt\", \"...\", 1, \"mr-3\"], [\"aria-current\", \"page\", 1, \"breadcrumb-item\", \"a1\"], [1, \"user\", \"mt-2\"], [1, \"user__permission\"], [1, \"user__intro\", \"mb-4\"], [1, \"fw-6\"], [1, \"user__select\", \"mb-3\"], [\"for\", \"roleTitle\"], [\"type\", \"text\", \"placeholder\", \"Admin\", \"name\", \"name\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"table\", \"table-borderless\", \"client-table\"], [\"scope\", \"col\", 1, \"head\"], [\"scope\", \"col\"], [\"class\", \"pb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"user__btn\"], [1, \"btn\", \"btn-outline-orange\", \"mx-2\", \"mx-lg-3\", \"px-5\", \"mb-4\", \"mt-3\"], [1, \"btn\", \"btn-orange-two\", \"mx-2\", \"mx-lg-3\", \"px-5\", \"mb-4\", \"mt-3\", 3, \"click\"], [1, \"pb-2\"], [\"scope\", \"row\", 1, \"user\", \"rounded-left\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"\"], [1, \"custom-control\", \"custom-checkbox\"], [\"type\", \"checkbox\", 1, \"custom-control-input\", 3, \"change\", \"id\", \"value\"], [1, \"custom-control-label\", 3, \"for\"]],\n      template: function NewroleComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0)(1, \"ol\", 1);\n          i0.ɵɵlistener(\"click\", function NewroleComponent_Template_ol_click_1_listener() {\n            return ctx.back();\n          });\n          i0.ɵɵelement(2, \"img\", 2);\n          i0.ɵɵelementStart(3, \"li\", 3)(4, \"a\");\n          i0.ɵɵtext(5, \"Back\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"div\", 6)(9, \"h6\", 7);\n          i0.ɵɵtext(10, \"Add Role\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"form\")(13, \"label\", 9);\n          i0.ɵɵtext(14, \"Role Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"input\", 10);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function NewroleComponent_Template_input_ngModelChange_15_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.roleData.name, $event) || (ctx.roleData.name = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(16, \"div\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"table\", 11)(18, \"thead\")(19, \"tr\")(20, \"th\", 12);\n          i0.ɵɵtext(21, \"Permission \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"th\", 13)(23, \"th\", 13)(24, \"th\", 13)(25, \"th\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"tbody\");\n          i0.ɵɵtemplate(27, NewroleComponent_tr_27_Template, 4, 2, \"tr\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"div\", 15)(29, \"button\", 16);\n          i0.ɵɵtext(30, \" Cancel \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"button\", 17);\n          i0.ɵɵlistener(\"click\", function NewroleComponent_Template_button_click_31_listener() {\n            return ctx.createRoles();\n          });\n          i0.ɵɵtext(32, \" Create \");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(15);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.roleData.name);\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngForOf\", ctx.newList);\n        }\n      },\n      dependencies: [i5.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.NgModel, i1.NgForm],\n      styles: [\".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:.75rem 0;margin-bottom:1rem;list-style:none;background-color:transparent;border-radius:.25rem;cursor:pointer}a[_ngcontent-%COMP%]{color:#1b5bac;font-weight:400;cursor:pointer}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#1b5bac;content:\\\">\\\";font-size:10px;display:none}.user__intro[_ngcontent-%COMP%], .user__select[_ngcontent-%COMP%]{display:flex;justify-content:space-between}input[type=text][_ngcontent-%COMP%]{width:125%}table.client-table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 1em}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{color:#4c75bd;background:transparent}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding-left:3.5rem}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0a1128;font-weight:600;padding-left:1.5rem;padding-left:3.5rem;position:relative;opacity:none}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:15px}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-bottom:.1rem}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#355691;font-size:14px}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0a1128;font-size:14px}.user__permission[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff;box-shadow:10px 10px 30px #d3dce766;border-radius:5px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:20px;color:#355691;font-weight:600}.btn-orange-two[_ngcontent-%COMP%]{background:#04aed4;border-radius:5px;height:44px;font-family:Nunito;font-style:normal;font-weight:600;font-size:15px;line-height:20px;color:#fff}.btn-outline-orange[_ngcontent-%COMP%]{border:1px solid #04aed4;box-sizing:border-box;border-radius:5px;height:44px;font-family:Nunito;font-style:normal;font-weight:600;font-size:14px;line-height:19px;color:#04aed4}.user__btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}\"]\n    }))();\n  }\n  return NewroleComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}