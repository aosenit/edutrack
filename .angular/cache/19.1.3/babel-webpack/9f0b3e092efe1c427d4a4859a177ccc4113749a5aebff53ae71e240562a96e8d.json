{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/data/alumni/alumni.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/services/classes/notifications/notifications.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction AdminAlumniCreateEventComponent_div_6_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"img\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r1.imageSrc, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminAlumniCreateEventComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function AdminAlumniCreateEventComponent_div_6_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.createEvent());\n    });\n    i0.ɵɵelementStart(2, \"div\", 7)(3, \"div\", 8)(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Event Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"label\", 11);\n    i0.ɵɵtext(9, \"Event Type \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"input\", 13);\n    i0.ɵɵlistener(\"change\", function AdminAlumniCreateEventComponent_div_6_Template_input_change_11_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.getEventType($event.target.checked));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"label\", 14);\n    i0.ɵɵtext(13, \"Virtual\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 15)(16, \"label\", 9);\n    i0.ɵɵtext(17, \"Location \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 7)(20, \"div\", 15)(21, \"label\", 9);\n    i0.ɵɵtext(22, \"Event Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"textarea\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 7)(25, \"div\", 8)(26, \"label\", 9);\n    i0.ɵɵtext(27, \"Start Date \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 8)(30, \"label\", 11);\n    i0.ɵɵtext(31, \"End Date \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"input\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 20)(34, \"div\", 8)(35, \"label\", 11);\n    i0.ɵɵtext(36, \"Tags \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"input\", 21);\n    i0.ɵɵelementStart(38, \"small\", 22);\n    i0.ɵɵtext(39, \" separate tags with comma\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(40, \"div\", 23)(41, \"div\", 24)(42, \"label\", 11);\n    i0.ɵɵtext(43, \"Upload Image \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"input\", 25);\n    i0.ɵɵlistener(\"change\", function AdminAlumniCreateEventComponent_div_6_Template_input_change_44_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleFileInput($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(45, AdminAlumniCreateEventComponent_div_6_div_45_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"div\", 27)(47, \"button\", 28);\n    i0.ɵɵtext(48, \" Create Event \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.newAlumniform);\n    i0.ɵɵadvance(44);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.imageSrc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.newAlumniform.invalid);\n  }\n}\nfunction AdminAlumniCreateEventComponent_div_7_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"img\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r1.imageSrc, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminAlumniCreateEventComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function AdminAlumniCreateEventComponent_div_7_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateEvent());\n    });\n    i0.ɵɵelementStart(2, \"div\", 7)(3, \"div\", 8)(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Event Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"label\", 11);\n    i0.ɵɵtext(9, \"Event Type \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"input\", 30);\n    i0.ɵɵlistener(\"change\", function AdminAlumniCreateEventComponent_div_7_Template_input_change_11_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.getEventType($event.target.checked));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"label\", 14);\n    i0.ɵɵtext(13, \"Virtual\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 15)(16, \"label\", 9);\n    i0.ɵɵtext(17, \"Location \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 7)(20, \"div\", 15)(21, \"label\", 9);\n    i0.ɵɵtext(22, \"Event Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"textarea\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 7)(25, \"div\", 8)(26, \"label\", 9);\n    i0.ɵɵtext(27, \"Start Date \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 8)(30, \"label\", 11);\n    i0.ɵɵtext(31, \"End Date \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"input\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 20)(34, \"div\", 8)(35, \"label\", 11);\n    i0.ɵɵtext(36, \"Tags \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"input\", 21);\n    i0.ɵɵelementStart(38, \"small\", 22);\n    i0.ɵɵtext(39, \" separate tags with comma\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(40, \"div\", 23)(41, \"div\", 24)(42, \"label\", 11);\n    i0.ɵɵtext(43, \"Upload Image \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"input\", 25);\n    i0.ɵɵlistener(\"change\", function AdminAlumniCreateEventComponent_div_7_Template_input_change_44_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleFileInput($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(45, AdminAlumniCreateEventComponent_div_7_div_45_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"div\", 27)(47, \"button\", 28);\n    i0.ɵɵtext(48, \" Update Event \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.editAlumniform);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"checked\", ctx_r1.checkEventType === true);\n    i0.ɵɵadvance(34);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.imageSrc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.editAlumniform.invalid);\n  }\n}\nexport let AdminAlumniCreateEventComponent = /*#__PURE__*/(() => {\n  class AdminAlumniCreateEventComponent {\n    constructor(alumni, fb, notifyService, router, route) {\n      this.alumni = alumni;\n      this.fb = fb;\n      this.notifyService = notifyService;\n      this.router = router;\n      this.route = route;\n      this.profileImageName = null;\n      this.newEvent = true;\n      this.editEvent = false;\n      this.checkEventType = false;\n    }\n    ngOnInit() {\n      this.newAlumniform = this.fb.group({\n        name: ['', Validators.required],\n        type: ['', Validators.required],\n        location: ['', Validators.required],\n        startDate: ['', Validators.required],\n        status: true,\n        endDate: ['', Validators.required],\n        description: ['', Validators.required],\n        tags: ['', Validators.required],\n        eventImg: null\n      });\n      this.pageId = this.route.snapshot.params.id;\n      this.route.params.subscribe(param => {\n        if (!param.id) {\n          this.newEvent = true;\n        } else {\n          // this.getProfileInformation();\n          this.getEventByid();\n          this.newEvent = false;\n          this.editEvent = true;\n          this.editAlumniform = this.fb.group({\n            name: [''],\n            type: [''],\n            location: [''],\n            startDate: [''],\n            status: true,\n            endDate: [''],\n            description: [''],\n            tags: [''],\n            eventImg: [null]\n          });\n        }\n      });\n    }\n    back() {\n      window.history.back();\n    }\n    getEventType(event) {\n      if (event === true) {\n        this.eventType = 'Virtual';\n      } else {\n        this.eventType = 'Physical';\n      }\n    }\n    handleFileInput(event) {\n      const reader = new FileReader();\n      if (event.target.files.length > 0) {\n        const file = event.target.files[0];\n        reader.readAsDataURL(file);\n        // console.log('file', file);\n        reader.onload = () => {\n          this.imageSrc = reader.result;\n          this.newAlumniform.patchValue({\n            fileSource: reader.result\n          });\n        };\n        this.profileImageName = file.name;\n        // console.log(this.DocumentTypes);\n        this.newAlumniform.get('eventImg').setValue(file);\n        const size = event.target.files[0].size;\n        if (size >= 1048576) {\n          this.notifyService.publishMessages('File size too large', 'danger', 1);\n        }\n      }\n    }\n    createEvent() {\n      const {\n        name,\n        type,\n        location,\n        startDate,\n        status,\n        endDate,\n        description,\n        tags,\n        eventImg\n      } = this.newAlumniform.value;\n      // const time = startDate + ' ' + startTime;\n      const tag = tags.split(',');\n      // console.log()\n      const payload = {\n        name,\n        type: this.eventType,\n        location,\n        startDate,\n        status,\n        endDate,\n        description,\n        tags: tag,\n        eventImg\n      };\n      console.log(payload);\n      this.alumni.createEvent(payload).subscribe(res => {\n        if (res.hasErrors === false) {\n          console.log(res);\n          this.notifyService.publishMessages(res.description, 'success', 1);\n          this.router.navigateByUrl('/school/alumni-events');\n        } else {\n          this.notifyService.publishMessages(res.description, 'danger', 1);\n        }\n      });\n    }\n    getEventByid() {\n      this.alumni.getAllAlumniEventId(this.pageId).subscribe(res => {\n        if (res.hasErrors === false) {\n          console.log(res);\n          this.populateEditForm(res.payload);\n        }\n      });\n    }\n    populateEditForm(payload) {\n      if (payload.type === 'Virtual') {\n        this.checkEventType = true;\n      } else {\n        this.checkEventType = false;\n      }\n      this.editAlumniform.patchValue({\n        name: payload.name,\n        location: payload.location,\n        startDate: moment(payload.startDate).format('YYYY-MM-DDThh:mm'),\n        endDate: moment(payload.endDate).format('YYYY-MM-DD'),\n        description: payload.description,\n        tags: payload.tags,\n        eventImg: null\n      });\n    }\n    updateEvent() {\n      const {\n        name,\n        type,\n        location,\n        startDate,\n        status,\n        endDate,\n        description,\n        tags,\n        eventImg\n      } = this.editAlumniform.value;\n      // const time = startDate + ' ' + startTime;\n      const tag = tags.split(',');\n      // console.log()\n      const payload = {\n        name,\n        type: this.eventType,\n        location,\n        startDate,\n        status,\n        endDate,\n        description,\n        tags: tag,\n        eventImg\n      };\n      console.log(payload);\n      this.alumni.updateEvent(this.pageId, payload).subscribe(res => {\n        if (res.hasErrors === false) {\n          console.log(res);\n          this.notifyService.publishMessages(res.description, 'success', 1);\n          this.router.navigateByUrl('/school/alumni-events');\n        } else {\n          this.notifyService.publishMessages(res.description, 'danger', 1);\n        }\n      });\n    }\n    static #_ = (() => this.ɵfac = function AdminAlumniCreateEventComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AdminAlumniCreateEventComponent)(i0.ɵɵdirectiveInject(i1.AlumniService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.NotificationsService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminAlumniCreateEventComponent,\n      selectors: [[\"app-admin-alumni-create-event\"]],\n      decls: 8,\n      vars: 2,\n      consts: [[\"aria-label\", \"breadcrumb\"], [1, \"breadcrumb\", 3, \"click\"], [\"src\", \"assets/images/svg/breadcrumb.svg\", \"alt\", \"...\", 1, \"mr-3\"], [\"aria-current\", \"page\", 1, \"breadcrumb-item\", \"a1\"], [\"class\", \" bg-white\", 4, \"ngIf\"], [1, \"bg-white\"], [1, \"pt-5\", 3, \"ngSubmit\", \"formGroup\"], [1, \"row\", \"mb-4\"], [1, \"col-md-6\"], [\"for\", \"domain\", 1, \"fw-6\"], [\"type\", \"text\", \"placeholder\", \"Event name\", \"id\", \"amount\", \"formControlName\", \"name\", 1, \"form-control\"], [\"for\", \"amount\", 1, \"fw-6\"], [1, \"custom-control\", \"custom-switch\"], [\"type\", \"checkbox\", \"id\", \"customSwitch1\", \"formControlName\", \"type\", 1, \"custom-control-input\", 3, \"change\"], [\"for\", \"customSwitch1\", 1, \"custom-control-label\"], [1, \"col-md-12\"], [\"type\", \"text\", \"placeholder\", \"Enter location\", \"id\", \"amount\", \"formControlName\", \"location\", 1, \"form-control\"], [\"name\", \"\", \"id\", \"\", \"cols\", \"30\", \"rows\", \"5\", \"placeholder\", \"Enter Description\", \"formControlName\", \"description\", 1, \"form-control\"], [\"type\", \"datetime-local\", \"id\", \"amount\", \"formControlName\", \"startDate\", 1, \"form-control\"], [\"type\", \"date\", \"id\", \"amount\", \"formControlName\", \"endDate\", 1, \"form-control\"], [1, \"row\", \"mb-5\"], [\"type\", \"text\", \"placeholder\", \"Enter tags\", \"id\", \"amount\", \"formControlName\", \"tags\", 1, \"form-control\"], [1, \"text-danger\"], [1, \"row\", \"mb-4\", \"px-3\"], [1, \"col-md-12\", \"attach-file\"], [\"type\", \"file\", \"placeholder\", \"Enter amount\", \"id\", \"amount\", \"accept\", \"image/png, image/jpeg\", 1, \"form-control\", \"file-upload\", 3, \"change\"], [\"class\", \"col-md-12 \", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-start\", \"mt-5\"], [1, \"btn\", \"btn-orange-two\", \"px-5\", \"mb-4\", \"mt-3\", 3, \"disabled\"], [\"alt\", \"...\", 1, \"imgPreview\", 3, \"src\"], [\"type\", \"checkbox\", \"id\", \"customSwitch1\", \"formControlName\", \"type\", 1, \"custom-control-input\", 3, \"change\", \"checked\"]],\n      template: function AdminAlumniCreateEventComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0)(1, \"ol\", 1);\n          i0.ɵɵlistener(\"click\", function AdminAlumniCreateEventComponent_Template_ol_click_1_listener() {\n            return ctx.back();\n          });\n          i0.ɵɵelement(2, \"img\", 2);\n          i0.ɵɵelementStart(3, \"li\", 3)(4, \"a\");\n          i0.ɵɵtext(5, \"Back\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(6, AdminAlumniCreateEventComponent_div_6_Template, 49, 3, \"div\", 4)(7, AdminAlumniCreateEventComponent_div_7_Template, 49, 4, \"div\", 4);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.newEvent);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.editEvent);\n        }\n      },\n      dependencies: [i5.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:.75rem 0;margin-bottom:1rem;list-style:none;background-color:transparent;border-radius:.25rem;cursor:pointer}a[_ngcontent-%COMP%]{color:#1b5bac;font-weight:400;cursor:pointer}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#1b5bac;content:\\\">\\\";font-size:10px;display:none}form[_ngcontent-%COMP%]{padding:0 3rem}.attach-file[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-position:110px 75px;background-color:#94b1d14f;border:2px dashed #ABC3DF;border-radius:5px;height:100px;display:flex;align-items:center;justify-content:center}.file-upload[_ngcontent-%COMP%]{position:absolute;cursor:pointer;opacity:0}.imgPreview[_ngcontent-%COMP%]{max-width:250px;max-height:250px;object-fit:cover}\"]\n    }))();\n  }\n  return AdminAlumniCreateEventComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}