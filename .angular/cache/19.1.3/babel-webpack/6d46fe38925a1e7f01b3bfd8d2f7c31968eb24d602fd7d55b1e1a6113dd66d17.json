{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/services/data/auth/auth.service\";\nimport * as i3 from \"src/services/classes/notifications/notifications.service\";\nimport * as i4 from \"@angular/common\";\nfunction EmailVerifiedComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"p\", 14);\n    i0.ɵɵtext(3, \" Email verification System \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 12)(5, \"div\", 15)(6, \"button\", 16);\n    i0.ɵɵtext(7, \" Verifying your email \");\n    i0.ɵɵelement(8, \"span\", 17);\n    i0.ɵɵelementStart(9, \"span\", 18);\n    i0.ɵɵtext(10, \"Loading...\");\n    i0.ɵɵelementEnd()()()()();\n  }\n}\nfunction EmailVerifiedComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"p\", 14);\n    i0.ɵɵtext(3, \" Email verification successful \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 19)(5, \"div\", 20)(6, \"small\", 21);\n    i0.ɵɵtext(7, \" \\uD83C\\uDF89 \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 22);\n    i0.ɵɵelement(9, \"p\", 23);\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let EmailVerifiedComponent = /*#__PURE__*/(() => {\n  class EmailVerifiedComponent {\n    constructor(route, authService, notifyService, router) {\n      this.route = route;\n      this.authService = authService;\n      this.notifyService = notifyService;\n      this.router = router;\n      this.initialMessage = true;\n      this.successMessage = false;\n    }\n    ngOnInit() {\n      this.verificationUrl = this.route.snapshot.queryParams;\n      const {\n        userId,\n        code\n      } = this.verificationUrl;\n      this.userId = userId;\n      this.userCode = code;\n      if (this.userId === undefined) {\n        this.initialMessage = true;\n      } else {\n        this.veryifyUserEmail();\n      }\n    }\n    veryifyUserEmail() {\n      this.authService.verifyUserEmail(this.userId, this.userCode).subscribe(data => {\n        if (data.hasErrors === false) {\n          // // ('emial verification good', data.payload);\n          // this.messageDescription = data.description;\n          sessionStorage.setItem('tk', data.payload);\n          this.successMessage = true;\n          this.initialMessage = false;\n          setTimeout(() => {\n            this.router.navigateByUrl('/reset-password');\n          }, 2000);\n        } else {\n          this.notifyService.publishMessages(data.errors, 'danger', 1);\n          // (data);\n        }\n      }, error => {\n        this.notifyService.publishMessages(error.message, 'danger', 1);\n      });\n    }\n    static #_ = (() => this.ɵfac = function EmailVerifiedComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || EmailVerifiedComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.NotificationsService), i0.ɵɵdirectiveInject(i1.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EmailVerifiedComponent,\n      selectors: [[\"app-email-verified\"]],\n      decls: 16,\n      vars: 2,\n      consts: [[1, \"\"], [1, \"kids\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\", \"pt-lg-4\", \"pt-2\", \"mb-lg-5\", \"mb-3\"], [\"src\", \"assets/images/newLogo.png\", \"alt\", \"\", 2, \"width\", \"70px\", \"object-fit\", \"contain\"], [1, \"col-lg-6\", \"m-auto\"], [1, \"whitediv\", \"p-lg-5\", \"p-3\", \"mt-lg-5\", \"mt-3\"], [\"class\", \"row justify-content-md-center\", 4, \"ngIf\"], [1, \"foot\", \"bg-dark\", \"py-3\"], [1, \"fc-grey\", \"ff-a\", \"fs-12\", \"m-0\", \"text-center\"], [1, \"fw-6\", \"ls-7\"], [1, \"row\", \"justify-content-md-center\"], [1, \"col-lg-12\", \"mb-3\"], [1, \"fs-30\", \"ff-n\", \"fw-6\", \"text-center\"], [1, \"col-lg-12\", \"mb-5\"], [1, \"btn\", \"btn-orange\", \"w-100\", \"align-items-center\", \"d-flex\", \"justify-content-center\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"ml-3\", \"spinner-border\", \"spinner-border-sm\"], [1, \"sr-only\"], [1, \"col-lg-12\"], [1, \"col-lg-12\", \"my-5\", \"d-flex\", \"justify-content-center\"], [1, \"fs-12\", \"emoji\", \"wheelUp\", \"ff-n\", \"fc-dark\", \"mb-3\", \"text-center\"], [1, \"col-12\"], [1, \"text-center\"]],\n      template: function EmailVerifiedComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n          i0.ɵɵelement(5, \"img\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n          i0.ɵɵtemplate(8, EmailVerifiedComponent_div_8_Template, 11, 0, \"div\", 8)(9, EmailVerifiedComponent_div_9_Template, 10, 0, \"div\", 8);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(10, \"div\", 9)(11, \"p\", 10);\n          i0.ɵɵtext(12, \" \\u00A9 2020. \");\n          i0.ɵɵelementStart(13, \"span\", 11);\n          i0.ɵɵtext(14, \"SchoolTrack\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(15, \" - All rights reserved \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.initialMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n        }\n      },\n      dependencies: [i4.NgIf],\n      styles: [\".kids[_ngcontent-%COMP%]{background:url(kids.png);background-size:cover;min-height:93vh}.foot[_ngcontent-%COMP%]{height:7vh}.whitediv[_ngcontent-%COMP%]{background:#fff;box-shadow:0 20px 50px #0d2944;border-radius:10px}.resetdiv[_ngcontent-%COMP%]{height:40vh;display:flex;align-items:center;justify-content:center;flex-flow:column}.emoji[_ngcontent-%COMP%]{font-size:4rem;text-align:center;animation:_ngcontent-%COMP%_heart-beat 1s linear alternate}.emoji[_ngcontent-%COMP%]:hover{font-size:5rem;transition:all .2s}.rtl[_ngcontent-%COMP%]{direction:rtl}.wheelUp[_ngcontent-%COMP%]{animation-name:wheelUp;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_heart-beat{25%{transform:scale(1.1)}75%{transform:scale(.6)}}\"]\n    }))();\n  }\n  return EmailVerifiedComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}