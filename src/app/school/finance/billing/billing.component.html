<section class="banner mb-4 pb-3" *ngIf="normal" >
    <div class="pt-5 pl-3 text-content ">
      <h6 class="banner__text-primary  ">Billing </h6>
      <p class=""> Showing all payment history </p>
    </div>
    <div class="d-flex">
      <!-- <button class="btn btn-outline-orange mx-2 mx-lg-3 px-5 mb-4 mt-3" > Bulk Actions </button> -->
      <!-- <button class="btn btn-orange-two mx-2 mx-lg-3 px-5 mb-4 mt-3" data-toggle="modal"
        data-target="#exampleModalCenterFinance"> Add New </button> -->
    </div>
  
  </section>
  <section class="banner mb-4 pb-3" *ngIf="type">
    <div class="pt-5 pl-3 text-content ">
        <h6 class="banner__text-primary  ">Billing </h6>
        <p class=""> Showing all payment history </p>
    </div>
    <div class="d-flex">
      <!-- <button class="btn btn-outline-orange mx-2 mx-lg-3 px-5 mb-4 mt-3" > Bulk Actions </button> -->
      <button class="btn btn-orange-two mx-2 mx-lg-3 px-5 mb-4 mt-3" data-toggle="modal"
        data-target="#invoiceModal"> Generate </button>
    </div>
  
  </section>
  
  <div class="d-flex mt-5 mb-1">
  
    <div class="searchpills-bar">
      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item mr-5" (click)="showStatus('normal')" >
          <a class="nav-link active" id="pills-class-tab" data-toggle="pill" href="#pills-class" role="tab"
            aria-controls="pills-class" aria-selected="true">Payment</a>
        </li>
        <li class="nav-item mr-5" (click)="showStatus('normal')" >
          <a class="nav-link " id="pills-type-tab" data-toggle="pill" href="#pills-type" role="tab"
            aria-controls="pills-type" aria-selected="true">Payment History</a>
        </li>
        <li class="nav-item mr-5" (click)="showStatus('type')">
          <a class="nav-link " id="pills-billing-tab" data-toggle="pill" href="#pills-billing" role="tab"
            aria-controls="pills-billing" aria-selected="true">Invoice</a>
        </li>
        <li class="nav-item mr-5"(click)="showStatus('normal')"  >
            <a class="nav-link " id="pills-history-tab" data-toggle="pill" href="#pills-history" role="tab"
              aria-controls="pills-history" aria-selected="true">Pending Payment</a>
          </li>
  
  
      </ul>
  
    </div>
  
    <div class="search__input has-search ml-auto">
      <span class="fa fa-search form-control-feedback"></span>
      <input type="text" class="form-control" placeholder="Search">
    </div>
  </div>
  
  
  <div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-class" role="tabpanel" aria-labelledby="pills-class-tab">
      <div class="empty-state" *ngIf="allPaymentList?.length == 0">
        <p class="text-center fs-24 ff-a">
          You have not added any record
        </p>
      </div>  
      <section class="list table-responsive mb-3" *ngIf="allPaymentList?.length > 0">
            <table class="table table-borderless client-table">
              <thead>
                <tr>
                  <th scope="col" class="head ">
                   Invoice #
                  </th>
                  <th scope="col">Student # </th>
                  <th scope="col">Total (#) </th>
      
                  <th scope="col">Paid(#) </th>
                  <th scope="col">Outstanding(#) </th>
                  <th scope="col">Fee Type </th>
                  <th scope="col">Due Date </th>
                  <th scope="col">Status</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                <tr class="pb-1" *ngFor="let payment of allPaymentList" >
                  <td scope="row" class="check rounded-left">
                    {{payment?.invoiceNumber}}
                  </td>
                  <td class="user">
                    <p class=" mb-0">{{payment?.studentRegNumber}} </p>
                  </td>
                  <td class="user">
                    <p class=" mb-0">{{payment?.totalAmount}} </p>
                  </td>
                  <td class="user">
                    <p class=" mb-0">{{payment?.totalPaid}} </p>
                  </td>
                  <td class="user">
                    <p class=" mb-0"> {{payment?.outstanding}} </p>
                  </td>
                  <td class="user">
                    <p class=" mb-0"> {{payment?.feeType}} </p>
                  </td>
                  <td class="user">
                    <p class=" mb-0"> {{payment?.dueDate | date: 'mediumDate'}} </p>
                  </td>
                 
      
                  <td>
                    <span class="status status_active" *ngIf="payment?.status === 'Paid'" >Paid</span>
                    <span class="status status_inactive" *ngIf="payment?.status === 'Pending'">Pending</span>
                    <span class="status status_overdue" *ngIf="payment?.status === 'Awaiting_Approval'">Awaiting</span>
                    <span class="status status_outstanding" *ngIf="payment?.status === 'Rejected'">Rejected</span>
                  </td>
                  <td>
                    <img *ngIf="payment?.status === 'Confirmed'"   src="assets/images/svg/view-payment.png" class="mr-3" alt="..." />
                    <img data-toggle="modal" data-target="#paymentModal" *ngIf="payment?.status === 'Pending' || payment?.status === 'Overdue'   "   src="assets/images/svg/make-payment.png" class="mr-3 cursor-pointer" alt="..." />
                    <img data-toggle="modal" data-target="#confirmPaymentModal" *ngIf="payment?.status === 'Awaiting_Approval' "  (click)="getTransactionDetails(payment?.transactionId)"  src="assets/images/svg/view-payment.png" class="mr-3 cursor-pointer" alt="..." />
                   
                    
                   
                  </td>
                 
                </tr>
               
      
      
              </tbody>
            </table>
      
          </section>
    </div>
    <div class="tab-pane fade " id="pills-type" role="tabpanel" aria-labelledby="pills-type-tab">
      
      <div class="empty-state" *ngIf="allPaymentHistoryList?.length == 0">
        <p class="text-center fs-24 ff-a">
          You have not added any record
        </p>
      </div>
      <section class="list table-responsive mb-3" *ngIf="allPaymentHistoryList?.length > 0">
        <table class="table table-borderless client-table">
          <thead>
            <tr>
             
              <th scope="col">Invoice #</th>
              <th scope="col">Student  </th>
  
              <th scope="col">Total(#)
  
              </th>
              <th scope="col">
                Fee Type
              </th>
              <th scope="col">
                Session
              </th>
              <th scope="col">
                Term 
              </th>
              <th scope="col">
                Due Date 
              </th>
            </tr>
          </thead>
          <tbody>
            <tr class="pb-1" *ngFor="let history of allPaymentHistoryList" >
             
              <td class="user">
                <p class=" mb-0">{{history?.invoiceNumber}} </p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.studentRegNumber}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.total}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.feeGroup}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.session}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.termName}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{history?.dueDate | date: 'mediumDate'}}</p>
              </td>
  
            </tr>
  
  
  
          </tbody>
        </table>
  
      </section>
    </div>
    <div class="tab-pane fade " id="pills-billing" role="tabpanel" aria-labelledby="pills-billing-tab">
      <div class="empty-state" *ngIf="invoiceList?.length == 0">
        <p class="text-center fs-24 ff-a">
          You have not added any record
        </p>
      </div>
      <section class="list table-responsive mb-3" *ngIf="invoiceList?.length > 0">
        <table class="table table-borderless client-table">
          <thead>
            <tr>
              <th scope="col" class="head ">
               Invoice #
              </th>
              <th scope="col">Student # </th>
              <th scope="col">Total (#) </th>
  
              <th scope="col">Fee Type </th>
              <th scope="col">Session </th>
              <th scope="col">Term </th>
              <th scope="col">Class </th>
              <th scope="col">Date</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            <tr class="pb-1" *ngFor= "let invoice of invoiceList" >
              <td scope="row" class="check rounded-left">
                <p class="cursor-pointer" data-toggle="modal" data-target="#previewInvoiceModal" (click)="previewInvoice(invoice?.invoiceId)" >{{invoice?.invoiceNumber}}</p>
              </td>
              <td class="user">
                <p class=" mb-0">{{invoice?.studentRegNumber}} </p>
              </td>
              <td class="user">
                <p class=" mb-0">{{invoice?.total}} </p>
              </td>
              <td class="user">
                <p class=" mb-0">{{invoice?.feeGroup}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{invoice?.session}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{invoice?.termName}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{invoice?.class}}</p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{invoice?.dueDate | date: 'mediumDate'}} </p>
              </td>
  
              <td>
                <span class="status status_active" *ngIf="invoice?.status === 'Approved'" >Approved</span>
                <span class=" status status_inactive" *ngIf="invoice?.status === false">Inactive</span>
              </td>
             
            </tr>
  
  
  
          </tbody>
        </table>
  
      </section>
    </div>
    <div class="tab-pane fade " id="pills-history" role="tabpanel" aria-labelledby="pills-history-tab">
      <div class="empty-state d-flex justify-content-center align-items-center" *ngIf="allPendingPaymentHistory?.length == 0">
        <p class="text-center  fs-24 ff-a">
          You have not added any record
        </p>
      </div>
      <section class="list table-responsive mb-3" *ngIf="allPendingPaymentHistory?.length > 0">
        <table class="table table-borderless client-table">
          <thead>
            <tr>
              <th scope="col" class="head ">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheckTh">
                  <label class="custom-control-label" for="customCheckTh"></label>
                </div>
              </th>
              <th scope="col">Invoice # </th>
              <th scope="col">Reference </th>
  
              <th scope="col">Amount(#)
  
              </th>
              <th scope="col">Fee Type</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            <tr class="pb-1" *ngFor="let pending of allPendingPaymentHistory " >
              <td scope="row" class="check rounded-left">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheck1">
                  <label class="custom-control-label" for="customCheck1"></label>
                </div>
              </td>
              <td class="user">
                <p class=" mb-0"> {{pending?.invoiceNumber}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{pending?.transactionNumber}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{pending?.amount}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{pending?.description}} </p>
              </td>
              <td class="user">
                <p class=" mb-0"> {{pending?.dueDate}} </p>
              </td>
              
  
              <td>
                <span class=" status status_inactive" >Pending</span>
                <!-- <span class="status_inactive" *ngIf="type?.isActive === false">Inactive</span> -->
              </td>
              
            </tr>
  
  
  
          </tbody>
        </table>
  
      </section>
    </div>
  
  
  </div>
  
  
  
  <!-- Finance Modal -->
  <div class="modal fade" id="invoiceModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalCenterFinanceTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-length" role="document">
      <div class="modal-content">
  
        <div class="modal-head mb-4">
          <div class="d-flex justify-content-between align-items-center ">
            <h6 class="modal-title fc-lblue">Generate Invoice</h6>
            <img src="assets/images/svg/close-modal.svg" alt="modal close button" id="closeInvoiceModal"
              data-dismiss="modal" aria-label="Close" class="close">
  
          </div>
  
        </div>
        <div class="modal-body client-modal">
          <form [formGroup]="invoiceForm" (ngSubmit)="generateInvoice()">
  
  
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="account" class="">Level </label>
                    <select name="" id="sex" class="form-control " name="lvel"
                formControlName="level" (change)="getClassBySectionId($event.target.value)">
                  <option value="" selected>Select...</option>
                  <option [value]="section.id" *ngFor = "let section of sections" > {{section.name}}</option>

                </select>   
                </div>
                <div class="col-md-6">
                    <label for="account" class="">Class Name </label>
                    <select name="" id="sex" class="form-control " name="lvel" formControlName="ClassId">
                        <option value="" selected>Select...</option>
                        <option [value]="class.id" *ngFor = "let class of classes" > {{class.name + ' ' + class?.classGroup}}</option>
      
                      </select> 
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="account" class="">Fee Type </label>
                    <select name="" id="sex" class="form-control " name="lvel"
                formControlName="FeegroupId" >
                  <option value="" selected>Select...</option>
                  <option [value]="fee.id" *ngFor="let fee of feeGroupList">{{fee?.name}}</option>

                </select>   
                </div>
                <div class="col-md-6">
                    <label for="account" class="">Session </label>
                    <select name="" id="sex" class="form-control " name="lvel" formControlName="session" (change)="getTerms($event.target.value)" >
                        <option value="" selected>Select...</option>
                        <option [value]="s" *ngFor = "let session of sessionList; let s = index" > {{session.name }}</option>
      
                      </select> 
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="account" class="">Term </label>
                    <select name="" id="sex" class="form-control " name="lvel"
                formControlName="term" >
                  <option value="" selected>Select...</option>
                  <option [value]="term.sequenceNumber " *ngFor="let term of termList; let t = index" > {{term.name}}</option>

                </select>   
                </div>
                <div class="col-md-6">
                    <label for="account" class="">Payment </label>
                   <input type="date" name="" id="" class="form-control" formControlName="paymentDate">
                </div>
            </div>
            
            
  
  
  
            <div class="d-flex justify-content-center mb-3">
              <button type="button " class="btn btn-outline-orange  px-5 mb-4 mt-3  mb-3 mr-3 "
                data-dismiss="modal">Cancel
              </button>
              <button class="btn btn-orange-two px-5 mb-4 mt-3" [disabled]="invoiceForm.invalid"> Generate</button>
            </div>
          </form>
        </div>
  
      </div>
    </div>
  </div>
  <!-- end of Finance modal -->
  



    <!-- Finance Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalCenterFinanceTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-length" role="document">
      <div class="modal-content">
  
        <div class="modal-head mb-4">
          <div class="d-flex justify-content-between align-items-center ">
            <h6 class="modal-title fc-lblue">Master Babalola Invoice</h6>
            <img src="assets/images/svg/close-modal.svg" alt="modal close button" id="closeInvoiceModal"
              data-dismiss="modal" aria-label="Close" class="close">
  
          </div>
  
        </div>
        <div class="modal-body client-modal">
          <form [formGroup]="invoiceForm" (ngSubmit)="generateInvoice()">
  
  
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="account" class="">Payment Mode <span class="text-danger">*</span></label>
                    <select name="" id="sex" class="form-control " name="lvel"
                  formControlName="level" (change)="getClassBySectionId($event.target.value)">
                  <option value="" selected>Select...</option>
                  <option value="bank" > Bank</option>

                </select>   
                </div>
                <div class="col-md-6">
                    <label for="account" class="">Bank </label>
                    <select name="" id="sex" class="form-control " name="lvel" formControlName="ClassId">
                        <option value="" selected>Select...</option>
                        <option value="citibank">Citibank</option>
          <option value="diamond">Diamond Bank</option>
          <option value="ecobank">Ecobank</option>
          <option value="fidelity">Fidelity Bank</option>
          <option value="firstbank">First Bank</option>
          <option value="fcmb">First City Monument Bank (FCMB)</option>
          <option value="gtb">Guaranty Trust Bank (GTB)</option>
          <option value="heritage">Heritage Bank</option>
          <option value="keystone">Keystone Bank</option>
          <option value="polaris">Polaris Bank</option>
          <option value="providus">Providus Bank</option>
          <option value="stanbic">Stanbic IBTC Bank</option>
          <option value="standard">Standard Chartered Bank</option>
          <option value="sterling">Sterling Bank</option>
          <option value="suntrust">Suntrust Bank</option>
          <option value="union">Union Bank</option>
          <option value="uba">United Bank for Africa (UBA)</option>
          <option value="unity">Unity Bank</option>
          <option value="wema">Wema Bank</option>
          <option value="zenith">Zenith Bank</option>
      
                      </select> 
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="account" class="">Reference Number </label>
                    <input type="text" class="form-control" placeholder="Enter reference number">
                </div>
                <div class="col-md-6">
                  <label for="account" class="">Paid by </label>
                  <input type="text" class="form-control" placeholder="Payment made by">
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="account" class="">Payment Date </label>
                <input type="date" class="form-control" placeholder="Enter payment date">
            </div>
                <div class="col-md-6">
                    <label for="account" class="">Outstanding </label>
                   <input type="number" name="" id="" class="form-control">
                </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="account" class="">Paid </label>
                <input type="number" class="form-control" placeholder="Enter amount paid">
            </div>
                <div class="col-md-6">
                    <label for="account" class="">Total Amount </label>
                   <input type="number" name="" id="" class="form-control" placeholder="Total Amount">
                </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="account" class="">Extra charges </label>
                <input type="number" class="form-control" placeholder="Extra charges">
            </div>
                <div class="col-md-6">
                    <label for="account" class=""> Amount </label>
                   <input type="number" name="" id="" class="form-control" placeholder=" amount">
                </div>
            </div>
            
            
  
  
  
            <div class="d-flex justify-content-center mb-3">
              <button type="button " class="btn btn-outline-orange  px-5 mb-4 mt-3  mb-3 mr-3 "
                data-dismiss="modal">Cancel
              </button>
              <button class="btn btn-orange-two px-5 mb-4 mt-3" > Pay</button>
            </div>
          </form>
        </div>
  
      </div>
    </div>
  </div>
  <!-- end of Finance modal -->


      <!-- Confirm payment Modal -->
      <div class="modal fade" id="confirmPaymentModal" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalCenterFinanceTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-length" role="document">
        <div class="modal-content">
    
          <div class="modal-head mb-4">
            <div class="d-flex justify-content-between align-items-center ">
              <h6 class="modal-title fc-lblue">Payment Confirmation</h6>
              <img src="assets/images/svg/close-modal.svg" alt="modal close button" id="closeConfirmPaymentModal"
                data-dismiss="modal" aria-label="Close" class="close">
    
            </div>
    
          </div>
          <div class="modal-body client-modal">
            <form [formGroup]="acceptRejectForm">
    
    
              <div class="row mb-3">
                  <div class="col-md-6">
                      <label for="account" class="">Transaction ID <span class="text-danger">*</span></label>
                     <input type="text" placeholder="Transaction ID" class="form-control" formControlName="transactionId">
                  </div>
                  <div class="col-md-6">
                      <label for="account" class="">Invoice Number </label>
                      <input type="text" placeholder="Invoice number" class="form-control" formControlName="invoice">

                  </div>
              </div>
  
              <div class="row mb-3">
                  <div class="col-md-6">
                      <label for="account" class="">Payment Reference </label>
                      <input type="text" class="form-control" placeholder="Enter reference number" formControlName="paymentReference">
                  </div>
                  <div class="col-md-6">
                    <label for="account" class="">Payment Channel </label>
                    <input type="text" class="form-control" placeholder="Payment channel" formControlName="paymentChannel">
                </div>
              </div>
  
              <div class="form-group">
                  <label for="account" class="">Transaction Description</label>
                  <input type="text" class="form-control" placeholder="Enter payment date" formControlName="description">
              </div>

              <div class="form-group" *ngIf="reject">
                  <label for="account" class="">Rejection reason</label>
                  <input type="text" class="form-control" placeholder="Enter reason for rejection" formControlName="Comment">
              </div>

              <div class="d-flex form-group mb-4">
                  <span>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5863 4.58616C12.7708 4.39514 12.9915 4.24278 13.2355 4.13796C13.4795 4.03314 13.742 3.97797 14.0075 3.97566C14.2731 3.97336 14.5364 4.02396 14.7822 4.12452C15.028 4.22508 15.2513 4.37359 15.4391 4.56137C15.6269 4.74916 15.7754 4.97246 15.876 5.21826C15.9765 5.46405 16.0271 5.72741 16.0248 5.99297C16.0225 6.25852 15.9673 6.52097 15.8625 6.76497C15.7577 7.00898 15.6053 7.22967 15.4143 7.41416L12.4143 10.4142C12.0393 10.7891 11.5307 10.9997 11.0003 10.9997C10.47 10.9997 9.96138 10.7891 9.58633 10.4142C9.39772 10.232 9.14512 10.1312 8.88292 10.1335C8.62073 10.1358 8.36991 10.2409 8.18451 10.4263C7.9991 10.6118 7.89393 10.8626 7.89165 11.1248C7.88937 11.387 7.99017 11.6396 8.17232 11.8282C8.92244 12.578 9.93967 12.9993 11.0003 12.9993C12.061 12.9993 13.0782 12.578 13.8283 11.8282L16.8283 8.82816C17.557 8.07376 17.9601 7.06335 17.951 6.01456C17.9419 4.96577 17.5212 3.96252 16.7796 3.22089C16.038 2.47926 15.0347 2.05858 13.9859 2.04947C12.9371 2.04035 11.9267 2.44353 11.1723 3.17216L9.67232 4.67216C9.57681 4.76441 9.50063 4.87476 9.44822 4.99676C9.39581 5.11876 9.36823 5.24998 9.36707 5.38276C9.36592 5.51554 9.39122 5.64722 9.4415 5.77012C9.49178 5.89301 9.56604 6.00467 9.65993 6.09856C9.75382 6.19245 9.86547 6.2667 9.98837 6.31699C10.1113 6.36727 10.2429 6.39257 10.3757 6.39141C10.5085 6.39026 10.6397 6.36267 10.7617 6.31027C10.8837 6.25786 10.9941 6.18167 11.0863 6.08616L12.5863 4.58616ZM7.58632 9.58616C7.96138 9.21122 8.47 9.00059 9.00032 9.00059C9.53065 9.00059 10.0393 9.21122 10.4143 9.58616C10.5066 9.68167 10.6169 9.75786 10.7389 9.81027C10.8609 9.86267 10.9921 9.89026 11.1249 9.89141C11.2577 9.89257 11.3894 9.86727 11.5123 9.81699C11.6352 9.76671 11.7468 9.69245 11.8407 9.59856C11.9346 9.50467 12.0089 9.39301 12.0591 9.27012C12.1094 9.14722 12.1347 9.01554 12.1336 8.88276C12.1324 8.74998 12.1048 8.61876 12.0524 8.49676C12 8.37476 11.9238 8.26441 11.8283 8.17216C11.0782 7.42228 10.061 7.00102 9.00032 7.00102C7.93967 7.00102 6.92244 7.42228 6.17232 8.17216L3.17232 11.1722C2.79028 11.5412 2.48556 11.9825 2.27592 12.4705C2.06628 12.9586 1.95594 13.4834 1.95132 14.0146C1.94671 14.5457 2.04791 15.0724 2.24904 15.564C2.45016 16.0556 2.74717 16.5022 3.12274 16.8777C3.49832 17.2533 3.94492 17.5503 4.43651 17.7515C4.92809 17.9526 5.45481 18.0538 5.98593 18.0492C6.51705 18.0446 7.04193 17.9342 7.52994 17.7246C8.01796 17.5149 8.45934 17.2102 8.82832 16.8282L10.3283 15.3282C10.4238 15.2359 10.5 15.1256 10.5524 15.0036C10.6048 14.8816 10.6324 14.7503 10.6336 14.6176C10.6347 14.4848 10.6094 14.3531 10.5591 14.2302C10.5089 14.1073 10.4346 13.9957 10.3407 13.9018C10.2468 13.8079 10.1352 13.7336 10.0123 13.6833C9.88938 13.6331 9.7577 13.6078 9.62492 13.6089C9.49214 13.6101 9.36092 13.6377 9.23892 13.6901C9.11692 13.7425 9.00657 13.8187 8.91432 13.9142L7.41432 15.4142C7.22983 15.6052 7.00914 15.7575 6.76513 15.8624C6.52113 15.9672 6.25869 16.0224 5.99313 16.0247C5.72757 16.027 5.46421 15.9764 5.21842 15.8758C4.97262 15.7752 4.74932 15.6267 4.56153 15.439C4.37375 15.2512 4.22524 15.0279 4.12468 14.7821C4.02412 14.5363 3.97352 14.2729 3.97582 14.0074C3.97813 13.7418 4.0333 13.4794 4.13812 13.2354C4.24294 12.9913 4.3953 12.7707 4.58632 12.5862L7.58632 9.58616Z" fill="black"/>
                      </svg>

                  </span>
                  <a class=" ml-3 mb-0 text-danger cursor-pointer" (click)="downloadProofOfpayment(fileName)"> {{fileName}} </a>
              </div>
    
              <div class="d-flex justify-content-center mb-3">
                <button type="button " class="btn btn-outline-orange  px-5 mb-4 mt-3  mb-3 mr-3 "  *ngIf="approve" (click)="rejectTransanction(true)"
                 >Reject
                </button>
                <button class="btn btn-orange-two px-5 mb-4 mt-3" (click)="approvalTransaction()"  *ngIf="approve"  > Confirm</button>
              </div>

              <div class="d-flex justify-content-center mb-3" *ngIf="reject2" >
                
                <button class="btn btn-orange-two px-5 mb-4 mt-3" (click)="sendRejection()"   > Confirm Reject</button>
              </div>

            </form>
          </div>
    
        </div>
      </div>
    </div>
    <!-- end of confirm payment modal -->
 

    <!-- previewInvoice Modal -->

    <div class="modal fade" id="previewInvoiceModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalCenterFinanceTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-length" style="width: 55%;" role="document">
      <div class="modal-content">
  
        <div class="modal-head mb-4">
          <div class="d-flex justify-content-between align-items-center ">
            <span class="cursor-pointer" (click)="print()">
              <svg
              width="52"
              height="19"
              viewBox="0 0 52 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M14.3776 6.66667H4.46094C3.2851 6.66667 2.33594 7.61583 2.33594 8.79167V13.0417H5.16927V15.875H13.6693V13.0417H16.5026V8.79167C16.5026 7.61583 15.5534 6.66667 14.3776 6.66667ZM12.2526 14.4583H6.58594V10.9167H12.2526V14.4583ZM14.3776 9.5C13.988 9.5 13.6693 9.18125 13.6693 8.79167C13.6693 8.40208 13.988 8.08333 14.3776 8.08333C14.7672 8.08333 15.0859 8.40208 15.0859 8.79167C15.0859 9.18125 14.7672 9.5 14.3776 9.5ZM13.6693 3.125H5.16927V5.95833H13.6693V3.125Z"
                fill="#0052B4"
              />
              <path
                d="M22.0679 14V4.13H26.1559C27.2199 4.13 28.0413 4.396 28.6199 4.928C29.1986 5.45067 29.4879 6.188 29.4879 7.14C29.4879 8.10133 29.1986 8.848 28.6199 9.38C28.0413 9.90267 27.2199 10.164 26.1559 10.164H23.5239V14H22.0679ZM23.5239 9.002H25.9459C27.3646 9.002 28.0739 8.38133 28.0739 7.14C28.0739 5.908 27.3646 5.292 25.9459 5.292H23.5239V9.002ZM30.7596 14V7.168H32.1316V8.386C32.4863 7.574 33.2236 7.12133 34.3436 7.028L34.8056 7L34.9036 8.204L34.0496 8.288C32.8083 8.40933 32.1876 9.04867 32.1876 10.206V14H30.7596ZM35.8563 5.586V4.116H37.5083V5.586H35.8563ZM35.9823 14V7.168H37.3963V14H35.9823ZM39.3866 14V7.168H40.7586V8.302C40.9919 7.89133 41.3092 7.57867 41.7106 7.364C42.1212 7.14933 42.5786 7.042 43.0826 7.042C44.6972 7.042 45.5046 7.95667 45.5046 9.786V14H44.0906V9.87C44.0906 9.282 43.9739 8.85267 43.7406 8.582C43.5166 8.31133 43.1619 8.176 42.6766 8.176C42.1072 8.176 41.6499 8.358 41.3046 8.722C40.9686 9.07667 40.8006 9.548 40.8006 10.136V14H39.3866ZM50.365 14.126C49.5063 14.126 48.867 13.9067 48.447 13.468C48.027 13.0293 47.817 12.3947 47.817 11.564V8.26H46.487V7.168H47.817V5.11H49.231V7.168H51.345V8.26H49.231V11.452C49.231 11.9467 49.3337 12.32 49.539 12.572C49.7537 12.824 50.099 12.95 50.575 12.95C50.7243 12.95 50.869 12.936 51.009 12.908C51.149 12.8707 51.289 12.8287 51.429 12.782L51.653 13.846C51.513 13.93 51.317 13.9953 51.065 14.042C50.8223 14.098 50.589 14.126 50.365 14.126Z"
                fill="#0A1128"
              />
            </svg>
            </span>
            <img src="assets/images/svg/close-modal.svg" alt="modal close button" id="closeInvoiceModal"
              data-dismiss="modal" aria-label="Close" class="close">
  
          </div>
  
        </div>
        <div class="modal-body client-modal" id="invoice">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="fw-6 invoice-title">School Invoice</h4>
            <img *ngIf="schoolLogo == null" src="assets/images/svg/logo.svg" alt=""> 
            <img class="" *ngIf="schoolLogo" src="data:image/png;base64,{{schoolLogo}}" alt="schools log"
            class="mr-3 school-image " id=""> 

          </div>
          <div class="mb-3" >
            <p class="invoice-p mb-0">
              <!-- Date: June 4, 2020 -->
            </p>
            <p class="invoice-p">Invoice: {{studentInvoicePreview?.invoiceNumber}}</p>
            
          </div>

          <div class="d-flex justify-content-between"> 

            <div >
              <h5> Bill to: </h5>
              <p class="fw-6">{{studentInvoicePreview?.studentName | titlecase}}</p>
              <p class="invoice-p">Class: {{studentInvoicePreview?.class}}</p>
            </div>

            <div>
              <p class="invoice-p mb-0"> Invoice Date: {{studentInvoicePreview?.creationDate | date: 'mediumDate' }} </p>
              <p class="invoice-p mb-0"> Invoice Due Date: {{studentInvoicePreview?.dueDate | date: 'mediumDate'}} </p>
              <p class="invoice-p mb-0"> Session: {{studentInvoicePreview?.session}} </p>
              <p class="invoice-p mb-0"> Term: {{studentInvoicePreview?.termName}} </p>
            </div>

          </div>

          <div class="invoice" >
            <table class="table table-borderless">
              <thead>
                <tr>
                  <th class="border-bottom" scope="col">Description</th>
                  <th class="border-bottom" scope="col">Rate</th>
                  <th class="border-bottom text-right" scope="col">Subtotal</th>
            
                </tr>
              </thead>
              <tbody>
                <tr *ngFor = "let list of studentInvoicePreview?.invoiceItems">
                  <td >{{list?.name}}</td>
                  <td>{{list?.amount}}</td>
                  <td class="text-right">{{list?.amount}}</td>
                </tr>
                <tr class="totals">
                  <td class="border-top">&nbsp;</td>
                  <td  class="border-top">Subtotal</td>
                  <td class="border-top text-right"> {{subTotal}}</td>
                </tr>
                <tr class="totals">
                  <td>&nbsp;</td>
                  <td class="subtotal" >Total</td>
                  <td class="subtotal text-right"> {{subTotal}} </td>
                </tr>
            
              </tbody>
            </table>
          </div>
        </div>
  
      </div>
    </div>
  </div>
    <!-- Preview Invoice Modal -->